<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <!-- 响应式 meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>诗歌九宫格生成器</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' x='-0.12em' font-size='90'>📜</text></svg>">
  <style>
    /* 加载新字体 */
    @font-face {
      font-family: "FZJZXF";
      src: url("font/FZJZXF.woff2") format("woff2"),
           url("font/FZJZXF.woff") format("woff"),
           url("font/FZJZXF.TTF") format("truetype");
      font-weight: normal;
      font-style: normal;
    }
    @font-face {
      font-family: "YanTi";
      src: url("font/yanti.woff2") format("woff2"),
            url("font/yanti.ttf") format("truetype");
      font-weight: normal;
      font-style: normal;
    }

    /* 返回首页按钮样式 */
    #backHomeBtn {
      position: fixed; /* 固定定位，不占用文档流 */
      top: 10px; /* 距离顶部10px */
      left: max(5%, calc(50% - min(90%, var(--max-width)) / 2));
      z-index: 10000; /* 确保在最上层 */
      padding: 3px 8px;
      background-color: rgba(147, 112, 219, 0.67); /* 添加透明度 */
      color: #fff;
      border: none;
      border-radius: 4px;
      font-size: 14px;
      font-family: "FZJZXF", "微软雅黑", Arial, sans-serif;
      cursor: pointer;
      box-shadow: 0 2px 4px rgba(0,0,0,0.25);
      transition: background-color 0.3s;
    }
    #backHomeBtn:hover {
      background-color: rgba(122, 95, 181, 0.95); /* 悬停时更透明 */
      opacity: 0.95;
    }
    
    /* body：左右居中，垂直靠上 */
    body {
      --max-width: 400px; /* 与主框架最大宽度一致 */
      margin: 0;
      padding-top: 22px;
      font-family: "FZJZXF", "微软雅黑", Arial, sans-serif;
      background-color: #f7f7f7;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      box-sizing: border-box;
    }

    /* 主容器：修改为适应九宫格居中 */
    .container {
      width: 90%;
      max-width: 400px;
      height: 633px;
      padding: 20px;
      margin: 20px auto;
      border-radius: 8px;
      box-shadow: 1px 3px 8px rgba(0,0,0,0.15);
      box-sizing: border-box;
      text-align: center;
      position: relative;
      display: block;
    }
    /* 九宫格模式下容器调整 */
.grid-mode {
  display: flex !important;
  flex-direction: column;
  justify-content: flex-start !important;
  align-items: center;
  padding: 0;
  text-align: center;
  width: 100%;
  box-sizing: border-box;
  /* 保持与主页面相同的高度 */
}
    /* 主界面诗词输入区域 */
    #poemInput {
      width: 100%;
      min-height: 39vh;
      max-height: 39vh;
      font-size: 18px;
      padding: 10px;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 4px;
      margin-bottom: 10px;
      overflow-y: auto;
      text-align: left;
      word-wrap: break-word;
      white-space: pre-wrap;
    }
/* 空状态提示和水印 */
#poemInput:empty:before {
  content: attr(data-placeholder);
  color: #aaa;
}

/* 水印始终显示 */
#poemInput:after {
  content: "m(AT)mrr.cc";
  position: absolute;
  bottom: 1px;
  right: 5px;
  font-family: "微软雅黑", Arial, sans-serif;
  color: rgba(211,211,211,0.5);
  font-size: 12px;
  pointer-events: none;
  z-index: 10;
}
/* 九宫格界面水印 */
.container:after {
  content: "m(AT)mrr.cc";
  position: absolute;
  bottom: 1px;
  right: 5px;
  font-family: "微软雅黑", Arial, sans-serif;
  color: rgba(211,211,211,0.5);
  font-size: 12px;
  pointer-events: none;
  z-index: 100;
  display: none;
}

/* 九宫格模式下显示容器水印 */
.grid-mode:after {
  display: block;
}
    /* 每周一首：简单换行显示 */
    .poem-content p {
      margin: 0 0 8px;
      text-indent: 20px;
      text-align: left;
    }

/* 诗词输入区域基础样式 */
#poemInput div {
  display: block !important;
  line-height: 1.3 !important;
  margin: 0 !important;
  /* 不设置padding-left */
}

/* 为标题行设置缩进 */
#poemInput div:not(.content-line) {
  padding-left: 15px;
}

/* 强制正文行使用内联样式 */
#poemInput div.content-line {
  padding-left: 0; /* 默认为0，完全依赖内联样式 */
}

/* 如果内联样式没生效，强制覆盖 */
#poemInput div.content-line[style] {
  /* 这个选择器确保有style属性的元素优先级更高 */
}

/* 标题和作者行样式（前两行紧密） */
#poemInput div:nth-child(1),
#poemInput div:nth-child(2) {
  line-height: 1.1 !important;
  margin-bottom: 2px !important;
}

/* 每周一首的第二行（作者行）与正文之间的间距 */
#poemInput div.weekly-title-line {
  line-height: 1.1 !important;
  margin-bottom: 8px !important;
}

/* 随机诗词的第二行（作者朝代行）与正文之间的间距 */
#poemInput div.random-author-line {
  line-height: 1.1 !important;
  margin-bottom: 8px !important;
}

/* 正文行样式 */
#poemInput div.content-line {
  text-align: left !important;
  line-height: 1.3 !important;
  margin-bottom: 0 !important;
}

/* 手动输入和每周一首的普通行 */
#poemInput div:not([style*="padding-left"]):not([style*="margin-bottom"]) {
  line-height: 1.3 !important;
  margin-bottom: 0 !important;
}

/* 主界面的注释和大意样式 */
#poemInput .poem-notes {
  font-size: 16px !important;
  color: #555 !important;
  padding-left: 3px !important; /* 减小缩进 */
  margin-top: 5px !important;
}

#poemInput .poem-notes-header {
  font-weight: bold;
  margin: 8px 0 4px 0;
  padding-left: 3px !important; /* 减小缩进 */
}

#poemInput .poem-notes-item {
  margin: 2px 0;
  text-indent: 0 !important;
  padding-left: 3px !important; /* 减小缩进 */
  line-height: 1.4 !important;
}

#poemInput .poem-summary {
  font-size: 16px !important;
  color: #555 !important;
  padding-left: 3px !important; /* 减小缩进 */
  margin-top: 5px !important;
}

#poemInput .poem-summary-header {
  font-weight: bold;
  margin: 8px 0 4px 0;
  padding-left: 3px !important; /* 减小缩进 */
}

#poemInput .poem-summary-content {
  margin: 2px 0;
  text-indent: 2em !important; /* 首行缩进两个字符 */
  padding-left: 3px !important; /* 减小缩进 */
  text-align: left !important;
  line-height: 1.4 !important;
}
    /* 历史记录区域 */
#historyContainer {
  width: 100%;
  margin-top: 10px;
  background: #f8f4e7;
  border-radius: 8px;
  box-shadow: 0 2px 12px rgba(0,0,0,0.08);
  min-height: 80px;
  max-height: 167px;
  overflow-y: auto;
  padding: 5px;
  text-align: left;
  font-size: 14px;
  color: #888;
  box-sizing: border-box;
  position: relative;
  overflow-x: hidden;
  z-index: 1000;
}

.history-item {
  padding: 2px 20px;
  border-bottom: 1px solid #f5f5f5;
  cursor: pointer;
  display: flex;
  align-items: center;
  position: relative;
  z-index: 2;
}

    #historyContainer > div.header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 5px;
      font-weight: normal;
    }
    #historyContainer > div.header button {
      font-size: 12px;
      background: transparent;
      border: 1px solid #888;
      border-radius: 3px;
      padding: 2px 5px;
      color: #888;
    }
    .history-item {
      padding: 2px 20px;
      border-bottom: 1px solid #f5f5f5;
      cursor: pointer;
      display: flex;
      align-items: center;
    }
    .history-item:last-child {
      border-bottom: none;
    }
    .history-title {
      flex: 1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .manual-tag { color: #0077ff; font-size: 14px; margin-right: 3px; }
    .weekly-tag { color: #48ff00; font-size: 14px; margin-right: 3px; }
    .random-tag { color: #ffae00; font-size: 14px; margin-right: 3px; }
    /* 生成按钮区域 */
    #generateButtonsContainer {
      display: flex;
      gap: 5px;
      margin-bottom: 10px;
    }
    #generateBtn, #clearBtn {
      height: 40px;
    }
    #generateBtn {
      flex: 4;
      background-color: #FF69B4;
      color: #fff;
      font-size: 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    #clearBtn {
      flex: 1;
      background-color: #fc6159;
      color: #fff;
      font-size: 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    /* 顶部按钮区域 */
    #top-buttons {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 10px;
      height: 40px;
      position: relative;
    }
    #weeklyContainer {
      flex: 1;
      position: relative;
    }
    /* 每周一首按钮 */
    #weeklyContainer button {
      height: 100%;
      padding: 0 10px;
      font-size: 16px;
      background-color: #9370DB;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      width: 100%;
    }
    /* 二级菜单 */
    #submenu {
      display: none;
      position: fixed;
      padding: 5px;
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 4px;
      z-index: 1001;
      flex-direction: row;
      gap: 5px;
    }
    #submenu button,
    #submenu select {
      padding: 5px 8px;
      font-size: 14px;
      border-radius: 4px;
      border: none;
      background-color: #4A90E2;
      color: #fff;
      cursor: pointer;
    }
    @keyframes expandScale {
      0% { transform: scaleX(0); opacity: 0; }
      100% { transform: scaleX(1); opacity: 1; }
    }
    #submenu.open {
      animation: expandScale 0.15s ease-out forwards;
      transform-origin: left;
    }
    #fillContainer {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 40px;
    }
    #fillContainer button {
      height: 100%;
      padding: 0 10px;
      font-size: 16px;
      background-color: #9370DB;
      border: none;
      border-radius: 4px;
      color: #fff;
      cursor: pointer;
      width: 100%;
    }
    /* 九宫格显示区域：完美居中设计 */
    #gridText {
      display: none;
      width: 320px;
      height: 320px;
      position: relative;
      z-index: 10;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, 1fr);
      gap: 8px;
      font-family: "FZJZXF", "微软雅黑", Arial, sans-serif;
      padding: 15px;
      box-sizing: border-box;
    }
    /* 九宫格每个格子 */
    .grid-cell {
      border: 1px solid #ccc;
      background-color: #FFEEEE;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 36px;
      cursor: pointer;
      font-family: "YanTi", "颜体", "FZJZXF", "SimHei", "黑体", "Microsoft YaHei", sans-serif;
      border-radius: 4px;
      max-width: 100px;
      max-height: 100px;
      min-width: 60px;
      min-height: 60px;
    }
  
    .cell-letter {
      transition: opacity 0.5s ease;
      opacity: 1;
    }
    /* 操作按钮区域 */
    #answer-buttons {
      display: none;
      width: 100%;
      margin: 15px 0;
      height: 40px;
      justify-content: space-between;
      gap: 5px;
      z-index: 11;
    }
    /* 按钮底色变暗：答案按钮采用较暗绿色，其他按钮采用较暗黄色 */
    #showAnswerBtn {
      flex: 2;
      background-color: #4CAF50 !important;
    }
    #searchBtn, #refreshBtn, #backBtn {
      flex: 1;
      background-color: #F57F17 !important;
    }
    #answer-buttons button {
      height: 100%;
      font-size: 16px;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
/* 答案显示区域 */
#poemAnswer {
  display: none;
  width: 100%;
  min-height: 160px;
  max-height: 233px;
  padding: 5px;
  border: 1px solid #ddd;
  border-left-width: 1px;
  border-top-width: 1px;
  border-right-width: 2px;
  border-bottom-width: 2px;
  border-radius: 8px;
  background-color: #fbfbebc7;
  text-align: center;
  color: #444;
  white-space: pre-wrap;
  overflow-y: auto;
  font-size: 18px;
  box-sizing: border-box;
  z-index: 8;
  margin: 0 auto;
}

/* 九宫格答案区域的注释和大意样式 */
#poemAnswer .answer-notes {
  font-size: 16px;
  color: #555;
  text-align: left;
  margin-top: 8px;
  padding-left: 8px;
}

#poemAnswer .answer-notes-header {
  font-weight: bold;
  margin: 8px 0 4px 0;
}

#poemAnswer .answer-notes-item {
  margin: 2px 0;
  padding-left: 8px;
  line-height: 1.4;
}

#poemAnswer .answer-summary {
  font-size: 16px;
  color: #555;
  text-align: left;
  margin-top: 8px;
  padding-left: 8px;
}

#poemAnswer .answer-summary-header {
  font-weight: bold;
  margin: 8px 0 4px 0;
}

#poemAnswer .answer-summary-content {
  margin: 2px 0;
  padding-left: 8px;
  line-height: 1.4;
  text-indent: 2em; /* 首行缩进两个字符 */
}

    .answer-line {
      text-align: center;
    }
/* 九宫格答案中每周一首的正文缩进调整 */
#poemAnswer .answer-line {
  padding-left: 0 !important; /* 或者改为你想要的缩进值，比如 5px */
}

/* 九宫格模式：使用flex完美居中 */
.grid-mode {
  display: flex !important;
  flex-direction: column;
  justify-content: flex-start !important;  /* 改为flex-start */
  align-items: center;
  padding: 0;
  text-align: center;
  width: 100%;
  box-sizing: border-box;
}

/* 九宫格模式下的内容布局 */
.grid-mode #gridText {
  display: grid !important;
  margin: 0 auto;
  margin-top: -70px;   /* 控制九宫格距离容器顶部的距离 */
}

.grid-mode #answer-buttons {
  display: flex !important;
  margin: -20px auto 15px auto;
  width: 100%;
  max-width: 360px;
}

.grid-mode #poemAnswer {
  display: block !important;  /* 确保答案区域显示 */
  width: 100%;
  max-width: 360px;
  margin: 0 auto;
}

/* 手机设备响应式调整 */
@media (max-height: 700px) {
  .grid-mode #gridText {
    margin-top: -40px;
  }
  .grid-mode #answer-buttons {
    margin: -10px auto 10px auto;
  }
}

@media (max-height: 600px) {
  .grid-mode #gridText {
    margin-top: -20px;
  }
  .grid-mode #answer-buttons {
    margin: -5px auto 8px auto;
  }
}

/* 手机宽度响应式 - 强制保持容器宽度一致 */
@media (max-width: 600px) {
  .container { 
    padding: 15px; 
  }
  
  /* 强制九宫格模式下保持相同的容器约束 */
  .grid-mode {
    width: 90% !important;  /* 强制与主页面相同 */
    max-width: 400px !important;  /* 强制与主页面相同 */
    margin: 20px auto !important;  /* 强制与主页面相同 */
  }
  
  #poemInput { 
    height: 180px; 
  }
  
  #gridText { 
    width: 280px;  /* 适当缩小以适应小屏幕 */
    height: 280px;
    padding: 10px;
  }
  
  .grid-cell {
    font-size: 32px;
    max-width: 90px;
    max-height: 90px;
  }
  
  .grid-mode #gridText {
    margin-top: -50px;
  }
  
  .grid-mode #answer-buttons {
    margin: -15px auto 12px auto;
    max-width: 280px;  /* 配合九宫格宽度 */
  }
}

@media (max-width: 400px) {
  /* 强制九宫格模式下保持相同的容器约束 */
  .grid-mode {
    width: 90% !important;
    max-width: 400px !important;
    margin: 20px auto !important;
  }
  
  #gridText { 
    width: 260px;  /* 进一步缩小 */
    height: 260px;
    padding: 8px;
  }
  
  .grid-cell {
    font-size: 30px;
    max-width: 80px;
    max-height: 80px;
  }
  
  .grid-mode #gridText {
    margin-top: -30px;
  }
  
  .grid-mode #answer-buttons {
    margin: -10px auto 10px auto;
    max-width: 260px;  /* 配合九宫格宽度 */
  }
}

/* 超小屏幕或横屏手机 */
@media (max-height: 500px) {
  .grid-mode #gridText {
    margin-top: 0px;
  }
  .grid-mode #answer-buttons {
    margin: 5px auto 5px auto;
  }
  #poemAnswer {
    max-height: 100px;
    min-height: 80px;
  }
}
  </style>
</head>
<body>
  <!-- 返回首页按钮（固定在左上角） -->
  <button id="backHomeBtn">←返回主页</button>
  
  <div class="container" id="mainContainer">
    <!-- SDK加载随机诗词 -->
    <div id="random-poem">
      <span id="jinrishici-sentence">正在加载今日诗词....</span>
      <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
    </div>
    <!-- 主界面诗词输入区域 -->
    <div id="poemInput" contenteditable="true" data-placeholder="请输入或在下方选择诗词"></div>
    <!-- 生成按钮区域 -->
    <div id="generateButtonsContainer">
      <button id="generateBtn">生成九宫格</button>
      <button id="clearBtn">清空</button>
    </div>
    <!-- 顶部按钮区域 -->
    <div id="top-buttons">
      <div id="weeklyContainer">
        <button id="weeklyBtn">每周一首</button>
        <div id="submenu">
          <!-- 整合三个控件：年级、上/下册、周次（随机选项位于第二项） -->
<select id="gradeSelect" aria-label="选择年级">
  <option value="1">一年级</option>
  <option value="2">二年级</option>
  <option value="3" selected>三年级</option>
  <option value="4">四年级</option>
  <option value="5">五年级</option>
  <option value="6">六年级</option>
</select>
<select id="volumeSelect" aria-label="选择上册或下册">
  <option value="上册">上册</option>
  <option value="下册" selected>下册</option>
</select>
<select id="weekSelect" aria-label="选择周次">
  <!-- 周次选项由 updateWeekSelect 动态生成 -->
</select>
        </div>
      </div>
      <div id="fillContainer">
        <button id="fillRandomBtn">随机诗词</button>
      </div>
    </div>
    <!-- 历史记录区域 -->
    <div id="historyContainer">
      <div class="header"><span>历史记录</span><button id="clearHistoryBtn">清空</button></div>
      <!-- 历史记录列表由JS动态生成 -->
    </div>
    <!-- 九宫格显示区域 -->
    <div id="gridText"></div>
    <br>
    <!-- 九宫格模式下操作按钮区域 -->
    <div id="answer-buttons">
      <button id="showAnswerBtn">答案</button>
      <button id="searchBtn">搜索</button>
      <button id="refreshBtn">刷新</button>
      <button id="backBtn">返回</button>
    </div>
    <!-- 答案显示区域 -->
    <div id="poemAnswer">↑点击按钮或本区域 显示/隐藏 答案</div>
  </div>
  
  <!-- 辅助函数 -->
  <script>
// 主界面文本格式化函数
function formatMainDisplay(text) {
  if (!text || typeof text !== "string") return "";
  
  console.log("原始文本:", text);
  
  let lines = text.split("\n").map(l => l.trim()).filter(l => l !== "");
  console.log("分割后的行:", lines);
  
  // 如果行数太少，直接返回
  if (lines.length <= 2) {
    return lines.map(line => `<div>${line}</div>`).join("");
  }
  
  // 分离标题部分和正文部分
  let header = [];
  let bodyLines = [];
  let notesSection = "";
  let summarySection = "";
  let isWeeklyPoem = false;
  let isRandomPoem = false;
  
  // 判断是否是每周一首（包含年级、《》、第几周等）
  if (lines[0] && (lines[0].includes('年级') || lines[0].includes('第') || lines[0].includes('周'))) {
    isWeeklyPoem = true;
    // 每周一首的结构：第1行是周次标题，第2行是作者朝代，第3行开始是正文
    header = lines.slice(0, 2); // 前两行：周次标题、作者朝代
    
    // 查找【注释】和【大意】的位置
    let notesStartIndex = -1;
    let summaryStartIndex = -1;
    
    for (let i = 2; i < lines.length; i++) { // 从第3行开始查找
      if (lines[i].includes('【注释】')) {
        notesStartIndex = i;
      } else if (lines[i].includes('【大意】')) {
        summaryStartIndex = i;
        break;
      }
    }
    
    if (notesStartIndex !== -1 && summaryStartIndex !== -1) {
      bodyLines = lines.slice(2, notesStartIndex); // 从第3行开始到注释前
      notesSection = formatNotesSection(lines.slice(notesStartIndex, summaryStartIndex));
      summarySection = formatSummarySection(lines.slice(summaryStartIndex));
    } else if (notesStartIndex !== -1) {
      bodyLines = lines.slice(2, notesStartIndex);
      notesSection = formatNotesSection(lines.slice(notesStartIndex));
    } else if (summaryStartIndex !== -1) {
      bodyLines = lines.slice(2, summaryStartIndex);
      summarySection = formatSummarySection(lines.slice(summaryStartIndex));
    } else {
      bodyLines = lines.slice(2); // 第三行开始：正文
    }
    
    console.log("识别为每周一首");
  } else if (lines[0] && lines[0].startsWith("《")) {
    // 随机诗词格式
    isRandomPoem = true;
    header = lines.slice(0, 2); // 只有前两行：标题和作者朝代
    
    // 处理正文：从第三行开始
    if (lines.length > 2) {
      let contentLine = lines[2];
      
      // 1. 先将半角逗号替换为换行符
      let processedContent = contentLine.replace(/,/g, '\n');
      
      // 2. 在全角句号、感叹号、问号后添加换行符
      processedContent = processedContent.replace(/([。！？])/g, '$1\n');
      
      // 3. 处理连续换行：将多个连续的换行符合并为一个
      processedContent = processedContent.replace(/\n+/g, '\n');
      
      // 4. 分割成行并过滤空行
      bodyLines = processedContent.split('\n').map(l => l.trim()).filter(l => l !== "");
      
      console.log("处理后的诗句:", bodyLines);
    }
    console.log("识别为随机诗词");
  } else {
    bodyLines = lines; // 全部作为正文处理
    console.log("识别为手动输入");
  }
  
  console.log("标题行:", header);
  console.log("正文行:", bodyLines);
  
  // 处理标题部分
  let headerHTML = "";
  if (isWeeklyPoem) {
    // 每周一首：周次标题、作者朝代（只有两行）
    if (header.length >= 1) {
      headerHTML += `<div>${header[0]}</div>`; // 第一行：周次标题
    }
    if (header.length >= 2) {
      headerHTML += `<div class="weekly-title-line">${header[1]}</div>`; // 第二行：作者朝代（与正文间有间距）
    }
  } else {
    // 随机诗词：标题、作者朝代
    if (header.length >= 1) {
      headerHTML += `<div>${header[0]}</div>`; // 第一行：标题
    }
    if (header.length >= 2) {
      headerHTML += `<div class="random-author-line">${header[1]}</div>`; // 第二行：作者朝代（与正文间有间距）
    }
  }
  
  // 处理正文部分
  let formattedBodyLines = [];
  if (bodyLines.length > 0) {
    // 新增：对于随机诗词，根据"句"来计算前四句的汉字总数
    let indentValue = "15px"; // 默认缩进
    let fontSize = ""; // 默认字体大小
    let rightPadding = "padding-right: 10px;"; // 默认右边距
    
if (isRandomPoem || isWeeklyPoem) {
  // 将所有正文内容合并，然后按标点符号分句
  let allBodyText = bodyLines.join("");
  console.log("合并的正文文本:", allBodyText);
  
  // 按标点符号分句（任何标点符号都算句子分隔符）
  let sentences = allBodyText.split(/[，。！？；：、,.\!\?;:]/);
  // 过滤空句子
  sentences = sentences.filter(s => s.trim() !== "");
  console.log("分句结果:", sentences);
  
  if (sentences.length >= 1) { // 改为只需要有第一句即可
    // 只统计第一句的纯汉字数量
    let firstSentence = sentences[0];
    let chineseChars = firstSentence.match(/[\u4e00-\u9fa5]/g);
    let charCount = chineseChars ? chineseChars.length : 0;
    
    console.log(`第一句: "${firstSentence}" -> ${charCount}个汉字`);
    
// 根据第一句汉字数量调整样式
    if (isWeeklyPoem) {
      // 每周一首的新逻辑：与缩进使用相同的判断逻辑
      if (charCount >= 7) {
        indentValue = "5px";
        fontSize = "font-size: 17px;"; // 设置较小的字体
        rightPadding = "padding-right: 1px;"; // 设置较小的右边距
        console.log("每周一首：第一句>=7个汉字，应用5px缩进和小字号");
      } else {
        indentValue = "15px";
        console.log("每周一首：第一句<7个汉字，应用15px缩进和默认字号");
      }
    } else if (isRandomPoem) {
      // 随机诗词保持原有逻辑
      if (sentences.length >= 4) {
        let firstFourSentences = sentences.slice(0, 4);
        let totalChineseChars = 0;
        
        firstFourSentences.forEach((sentence, index) => {
          let chineseChars = sentence.match(/[\u4e00-\u9fa5]/g);
          let charCount = chineseChars ? chineseChars.length : 0;
          console.log(`第${index + 1}句: "${sentence}" -> ${charCount}个汉字`);
          totalChineseChars += charCount;
        });
        
        console.log("前四句汉字总数:", totalChineseChars);
        
        if (totalChineseChars >= 28) {
          indentValue = "5px";
          fontSize = "font-size: 17px;"; // 设置较小的字体
          rightPadding = "padding-right: 1px;"; // 设置较小的右边距
          console.log("随机诗词：应用5px缩进和小字号");
        } else if (totalChineseChars <= 20) {
          indentValue = "22px";
          console.log("随机诗词：应用22px缩进");
        } else {
          console.log("随机诗词：保持15px缩进和默认字号");
        }
      }
    }
  }
}

// 应用计算出的缩进值、字体大小和右边距
formattedBodyLines = bodyLines.map((line, index) => {
  console.log(`正文第${index + 1}行应用缩进: ${indentValue}`);
  return `<div class="content-line" style="padding-left: ${indentValue} !important; ${rightPadding} ${fontSize}">${line}</div>`;
});
    console.log("正文格式化完成，缩进值:", indentValue, "字体大小:", fontSize);
  }
  
  let result = headerHTML + formattedBodyLines.join("") + notesSection + summarySection;
  console.log("最终HTML:", result);
  return result;
}

// 格式化注释部分（主界面）
function formatNotesSection(notesLines) {
  if (!notesLines || notesLines.length === 0) return "";
  
  let html = '<div class="poem-notes">';
  html += '<div class="poem-notes-header">【注释】</div>';
  
  for (let i = 1; i < notesLines.length; i++) { // 跳过第一行的【注释】标题
    let line = notesLines[i].trim();
    if (line) {
      // 检查是否已经有序号，如果有则添加bullet，如果没有则保持原样
      if (/^[①②③④⑤⑥⑦⑧⑨⑩]/.test(line)) {
        html += `<div class="poem-notes-item">• ${line}</div>`;
      } else {
        html += `<div class="poem-notes-item">${line}</div>`;
      }
    }
  }
  
  html += '</div>';
  return html;
}

// 格式化大意部分（主界面）
function formatSummarySection(summaryLines) {
  if (!summaryLines || summaryLines.length === 0) return "";
  
  let html = '<div class="poem-summary">';
  html += '<div class="poem-summary-header">【大意】</div>';
  
  for (let i = 1; i < summaryLines.length; i++) { // 跳过第一行的【大意】标题
    let line = summaryLines[i].trim();
    if (line) {
      html += `<div class="poem-summary-content">${line}</div>`;
    }
  }
  
  html += '</div>';
  return html;
}

// 从数组格式构建注释和大意文本（避免重复）
function buildNotesAndSummaryText(poem) {
  let notesText = "";
  let summaryText = "";
  
  if (poem.notes && Array.isArray(poem.notes)) {
    notesText = "\n\n【注释】\n" + poem.notes.join("\n");
  }
  
  if (poem.summary && typeof poem.summary === "string") {
    summaryText = "\n\n【大意】\n" + poem.summary;
  }
  
  return { notesText, summaryText };
}

    // 将连续出现的标点（允许全角与半角混用，之间可能有空白）只保留第一个
function collapsePunctuation(str) {
  console.log("处理前:", str);
  // 去除标点符号后面的半角逗号，处理更多情况
  let result = str.replace(/([，。！？；…])\s*,/g, '$1')
                 .replace(/([，。！？；…]),/g, '$1')
                 .replace(/。\s*,/g, '。')
                 .replace(/，\s*,/g, '，');
  console.log("处理后:", result);
  return result;
}
    // 针对每周一首：直接以div换行显示
function formatWeeklyPoem(fullText) {
  let lines = fullText.split("\n");
  let formattedLines = lines.map((line, index) => {
    if (index === 0 || index === 1) {
      // 前两行：周次和标题，紧密排列
      return `<div>${line}</div>`;
    } else if (index === 2) {
      // 第三行：作者，作为最后一个标题行
      return `<div>${line}</div>`;
    } else {
      // 第四行及以后：正文行，不添加缩进（每周一首不需要缩进）
      return `<div>${line}</div>`;
    }
  });
  return formattedLines.join("");
}

    // 针对随机诗词：对正文中每一行调用 collapsePunctuation，再每两行合并显示
function formatRandomPoem(fullText) {
  let lines = fullText.split("\n").map(l => l.trim()).filter(l => l !== "");
  
  if (lines.length <= 3) {
    // 短诗词直接用div包装每行
    return lines.map(line => `<div>${line}</div>`).join("");
  } else {
    let header = lines.slice(0, 2); // 标题、作者（前两行紧密）
    let dynastyAuthor = lines[2]; // 朝代作者行
    let bodyLines = lines.slice(3); // 正文行
    
    // 标题和作者（紧密排列）
    let headerHTML = header.map(line => `<div>${line}</div>`).join("");
    
    // 朝代作者行（与正文之间有大间距）
    let dynastyHTML = `<div style="margin-bottom: 15px;">${dynastyAuthor}</div>`;
        
    // 正文部分，每行都用div包装，添加缩进样式
    let bodyHTML = bodyLines.map(line => 
      `<div style="padding-left: 30px;">${line}</div>`
    ).join("");
    
    return headerHTML + dynastyHTML + bodyHTML;
  }
}
    // 备用：随机诗词复杂格式处理
    function formatMainPoem(fullText) {
      let lines = fullText.split("\n").map(line => line.trim());
      let headerLines = [];
      if (lines[0] && (lines[0].includes('年级') || lines[0].startsWith("《"))) {
        for (let i = 0; i < 3 && i < lines.length; i++) {
          headerLines.push(lines[i]);
        }
        lines = lines.slice(3);
      }
      if (headerLines.length === 0) {
        return lines.join("<br/>");
      }
      if(headerLines.length >= 2) {
        let title = headerLines[1];
        if(title.startsWith("《") && title.endsWith("》")){
          title = title.slice(1,-1);
        }
        headerLines[1] = title;
      }
      let headerHTML = headerLines.map(item => `<div>${item}</div>`).join("");
      let content = lines.join(" ");
      const punctRegex = /([，,。、。.！？!…\?]+)/g;
      let sentences = content.split(punctRegex)
          .map(function(part, index, array) {
              if (!punctRegex.test(part) && index < array.length - 1) {
                  return part + (array[index + 1] || '') + "<br/>";
              }
              return part;
          })
          .filter(function(s) { return s.trim(); });
      let contentHTML = sentences.join("");
      return `<div>${headerHTML}</div><div class="poem-content">${contentHTML}</div>`;
    }
// 格式化答案文本（九宫格答案，避免重复）
function formatAnswerNew(text) {
  if (!text || typeof text !== "string") return "";
  
  console.log("formatAnswerNew收到的文本:", text);
  
  // 检查是否已经包含格式化的注释和大意，如果是则避免重复处理
  if (text.includes('【注释】') || text.includes('【大意】')) {
    console.log("检测到已格式化的注释大意，进入简化处理");
    
    // 如果文本中已经有格式化的标记，就采用简化处理
    let lines = text.split("\n").map(line => line.trim()).filter(line => line !== "");
    let bodyEndIndex = -1;
    
    // 找到正文结束的位置
    for (let i = 0; i < lines.length; i++) {
      if (lines[i].includes('【注释】') || lines[i].includes('【大意】')) {
        bodyEndIndex = i;
        break;
      }
    }
    
    let header = [];
    let bodyLines = [];
    
    // 识别是否为每周一首格式
    let isWeeklyPoem = lines[0] && (lines[0].includes('年级') || lines[0].includes('第') || lines[0].includes('周'));
    
    if (lines.length >= 2 && lines[0].startsWith("《")) {
      // 随机诗词格式
      header = lines.slice(0, 2);
      if (bodyEndIndex !== -1) {
        bodyLines = lines.slice(2, bodyEndIndex);
      } else {
        bodyLines = lines.slice(2);
      }
    } else if (isWeeklyPoem) {
      // 每周一首格式：前2行是标题信息
      header = lines.slice(0, 2);
      if (bodyEndIndex !== -1) {
        bodyLines = lines.slice(2, bodyEndIndex);
      } else {
        bodyLines = lines.slice(2);
      }
    } else {
      // 其他格式
      return text; // 直接返回原文本
    }
    
    // 对于每周一首，保持原有行结构不进行合并，但添加小字体标记
    if (isWeeklyPoem) {
      console.log("进入简化处理的每周一首分支");
      
      // 分析正文第一句的字数以决定字体大小
      let allBodyText = bodyLines.join("");
      let sentences = allBodyText.split(/[，。！？；：、,.\!\?;:]/);
      sentences = sentences.filter(s => s.trim() !== "");
      
      let useSmallFont = false;
      if (sentences.length >= 1) {
        let firstSentence = sentences[0];
        let chineseChars = firstSentence.match(/[\u4e00-\u9fa5]/g);
        let charCount = chineseChars ? chineseChars.length : 0;
        
        if (charCount >= 7) {
          useSmallFont = true;
          console.log("简化处理-九宫格答案-每周一首：第一句>=7个汉字，应用小字号");
        } else {
          console.log("简化处理-九宫格答案-每周一首：第一句<7个汉字，保持默认字号");
        }
      }
      
      // 处理正文行，添加特殊标记
      let formattedBodyLines = bodyLines.map(line => {
        if (useSmallFont) {
          console.log("简化处理：添加小字体标记到行:", line);
          return `[SMALLFONT]${line}[/SMALLFONT]`;
        }
        return line;
      });
      
      let result = header.join("\n") + "\n" + formattedBodyLines.join("\n");
      
      // 添加注释和大意部分
      if (bodyEndIndex !== -1) {
        result += "\n" + lines.slice(bodyEndIndex).join("\n");
      }
      
      console.log("简化处理最终结果:", result);
      return result;
    } else {
      // 对于随机诗词，进行传统的两两合并处理
      let bodyText = bodyLines.join(" ");
      const punctuations = /([，,、。.！？!…\?]+|$)/g;
      let matches = bodyText.match(new RegExp(`[^，,、。.！？!…\?]+[，,、。.！？!…\?]*`, 'g'));
      
      if (!matches || matches.length === 0) {
        return text; // 直接返回原文本
      }
      
      let formattedBody = "";
      for (let i = 0; i < matches.length; i += 2) {
        if (i + 1 < matches.length) {
          let firstSentence = matches[i];
          let secondSentence = matches[i + 1].replace(punctuations, "");
          formattedBody += firstSentence + secondSentence + "\n";
        } else {
          formattedBody += matches[i].replace(punctuations, "") + "\n";
        }
      }
      
      // 返回格式化的正文加上剩余的注释和大意部分
      let result = header.join("\n") + "\n" + formattedBody;
      if (bodyEndIndex !== -1) {
        result += "\n" + lines.slice(bodyEndIndex).join("\n");
      }
      
      return result;
    }
  }
  
  // 原有的处理逻辑（用于没有格式化标记的文本）
  let textNoHalfComma = text.replace(/(,)(?=[，。])|([，。])(?=,)/g, "");
  let lines = textNoHalfComma.split("\n").map(line => line.trim()).filter(line => line !== "");
  let header = [];
  let bodyText = "";
  
  // 查找【注释】和【大意】的位置
  let notesStartIndex = -1;
  let summaryStartIndex = -1;
  
  for (let i = 0; i < lines.length; i++) {
    if (lines[i].includes('【注释】')) {
      notesStartIndex = i;
    } else if (lines[i].includes('【大意】')) {
      summaryStartIndex = i;
      break;
    }
  }
  
  // 识别是否为每周一首格式
  let isWeeklyPoem = lines[0] && (lines[0].includes('年级') || lines[0].includes('第') || lines[0].includes('周'));
  
  if (lines.length >= 2 && lines[0].startsWith("《")) {
    // 随机诗词格式
    header = lines.slice(0, 2);
    
    if (notesStartIndex !== -1) {
      bodyText = lines.slice(2, notesStartIndex).join(" ");
    } else {
      bodyText = lines.slice(2).join(" ");
    }
  } else if (isWeeklyPoem) {
    // 每周一首格式：前2行是标题信息
    header = lines.slice(0, 2);
    
    if (notesStartIndex !== -1) {
      // 对于每周一首，保持行结构，不用空格连接
      bodyText = lines.slice(2, notesStartIndex).join("\n");
    } else {
      bodyText = lines.slice(2).join("\n");
    }
  } else {
    return text;
  }
  
  // 对于每周一首，不进行句子合并处理，但应用动态字体逻辑
  if (isWeeklyPoem) {
    // 分析正文第一句的字数以决定字体大小
    let bodyLines = bodyText.split("\n").filter(line => line.trim() !== "");
    let allBodyText = bodyLines.join("");
    let sentences = allBodyText.split(/[，。！？；：、,.\!\?;:]/);
    sentences = sentences.filter(s => s.trim() !== "");
    
    let useSmallFont = false;
    if (sentences.length >= 1) {
      let firstSentence = sentences[0];
      let chineseChars = firstSentence.match(/[\u4e00-\u9fa5]/g);
      let charCount = chineseChars ? chineseChars.length : 0;
      
      if (charCount >= 7) {
        useSmallFont = true;
        console.log("九宫格答案-每周一首：第一句>=7个汉字，应用小字号");
      } else {
        console.log("九宫格答案-每周一首：第一句<7个汉字，保持默认字号");
      }
    }
    
    // 构建结果，为正文行添加特殊标记
    let result = header.join("\n") + "\n";
    
    // 处理正文行，添加特殊标记
    let formattedBodyLines = bodyLines.map(line => {
      if (useSmallFont) {
        console.log("添加小字体标记到行:", line);
        return `[SMALLFONT]${line}[/SMALLFONT]`;
      }
      return line;
    });
    result += formattedBodyLines.join("\n");
    
    console.log("九宫格答案最终结果:", result);
    
    // 添加注释和大意部分（用于九宫格答案）
    if (notesStartIndex !== -1) {
      result += "\n\n【注释】\n";
      if (summaryStartIndex !== -1) {
        for (let i = notesStartIndex + 1; i < summaryStartIndex; i++) {
          if (/^[①②③④⑤⑥⑦⑧⑨⑩]/.test(lines[i].trim())) {
            result += "• " + lines[i] + "\n";
          } else if (lines[i].trim()) {
            result += lines[i] + "\n";
          }
        }
      } else {
        for (let i = notesStartIndex + 1; i < lines.length; i++) {
          if (/^[①②③④⑤⑥⑦⑧⑨⑩]/.test(lines[i].trim())) {
            result += "• " + lines[i] + "\n";
          } else if (lines[i].trim()) {
            result += lines[i] + "\n";
          }
        }
      }
    }
    
    if (summaryStartIndex !== -1) {
      result += "\n\n【大意】\n";
      for (let i = summaryStartIndex + 1; i < lines.length; i++) {
        if (lines[i].trim()) {
          result += "　　" + lines[i] + "\n"; // 添加两个全角空格实现首行缩进
        }
      }
    }
    
    return result;
  } else {
    // 对于随机诗词，进行传统的句子合并处理
    const punctuations = /([，,、。.！？!…\?]+|$)/g;
    let matches = bodyText.match(new RegExp(`[^，,、。.！？!…\?]+[，,、。.！？!…\?]*`, 'g'));
    if (!matches || matches.length === 0) {
      return header.join("\n") + "\n" + bodyText;
    }
    let formattedBody = "";
    for (let i = 0; i < matches.length; i += 2) {
      if (i + 1 < matches.length) {
        let firstSentence = matches[i];
        let secondSentence = matches[i + 1].replace(punctuations, "");
        formattedBody += firstSentence + secondSentence + "\n";
      } else {
        formattedBody += matches[i].replace(punctuations, "") + "\n";
      }
    }
    
    let result = header.join("\n") + "\n" + formattedBody;
    
    // 添加注释和大意部分（用于九宫格答案）
    if (notesStartIndex !== -1) {
      result += "\n\n【注释】\n";
      if (summaryStartIndex !== -1) {
        for (let i = notesStartIndex + 1; i < summaryStartIndex; i++) {
          if (/^[①②③④⑤⑥⑦⑧⑨⑩]/.test(lines[i].trim())) {
            result += "• " + lines[i] + "\n";
          } else if (lines[i].trim()) {
            result += lines[i] + "\n";
          }
        }
      } else {
        for (let i = notesStartIndex + 1; i < lines.length; i++) {
          if (/^[①②③④⑤⑥⑦⑧⑨⑩]/.test(lines[i].trim())) {
            result += "• " + lines[i] + "\n";
          } else if (lines[i].trim()) {
            result += lines[i] + "\n";
          }
        }
      }
    }
    
    if (summaryStartIndex !== -1) {
      result += "\n\n【大意】\n";
      for (let i = summaryStartIndex + 1; i < lines.length; i++) {
        if (lines[i].trim()) {
          result += "　　" + lines[i] + "\n"; // 添加两个全角空格实现首行缩进
        }
      }
    }
    
    return result;
  }
}
    // 根据文本字数判断答案显示格式（平均字符数少于8，则合并两行后居中显示）
    function formatAnswerDisplay(text) {
      let lines = text.split("\n").map(l => l.trim()).filter(l => l !== "");
      
      let resultHTML = "";
      let inNotes = false;
      let inSummary = false;
      
      for (let i = 0; i < lines.length; i++) {
        let line = lines[i];
        
        if (line.includes('【注释】')) {
          resultHTML += '<div class="answer-notes"><div class="answer-notes-header">【注释】</div>';
          inNotes = true;
          inSummary = false;
          continue;
        } else if (line.includes('【大意】')) {
          if (inNotes) {
            resultHTML += '</div>'; // 关闭注释部分
          }
          resultHTML += '<div class="answer-summary"><div class="answer-summary-header">【大意】</div>';
          inNotes = false;
          inSummary = true;
          continue;
        }
        
        if (inNotes) {
          resultHTML += `<div class="answer-notes-item">${line}</div>`;
        } else if (inSummary) {
          resultHTML += `<div class="answer-summary-content">${line}</div>`;
        } else {
          // 正文部分的处理
          let hasSmallFont = line.includes('[SMALLFONT]');
          let cleanLine = line.replace(/\[SMALLFONT\]|\[\/SMALLFONT\]/g, '');
          
          console.log("处理答案行:", line, "是否有小字体标记:", hasSmallFont);
          
          let totalChars = lines.slice(0, Math.min(i + 4, lines.length)).reduce((sum, l) => {
            return sum + l.replace(/\[SMALLFONT\]|\[\/SMALLFONT\]/g, '').length;
          }, 0);
          let avg = totalChars / Math.min(i + 4, lines.length);
          
          if (avg < 8 && i + 1 < lines.length && !lines[i + 1].includes('【')) {
            let nextLine = lines[i + 1];
            let nextHasSmallFont = nextLine.includes('[SMALLFONT]');
            let cleanNextLine = nextLine.replace(/\[SMALLFONT\]|\[\/SMALLFONT\]/g, '');
            
            if (hasSmallFont || nextHasSmallFont) {
              console.log("应用小字体到合并行");
              resultHTML += `<div class="answer-line" style="font-size: 17px !important;">${cleanLine} ${cleanNextLine}</div>`;
            } else {
              resultHTML += `<div class="answer-line">${cleanLine} ${cleanNextLine}</div>`;
            }
            i++; // 跳过下一行
          } else {
            if (hasSmallFont) {
              console.log("应用小字体到单行");
              resultHTML += `<div class="answer-line" style="font-size: 17px !important;">${cleanLine}</div>`;
            } else {
              resultHTML += `<div class="answer-line">${cleanLine}</div>`;
            }
          }
        }
      }
      
      // 关闭未关闭的div
      if (inNotes || inSummary) {
        resultHTML += '</div>';
      }
      
      return resultHTML;
    }
  </script>
  
  <!-- 主逻辑代码 -->
  <script>
    window.onload = function () {
  // 恢复上次选择的年级和册别
  var savedGrade = localStorage.getItem('selectedGrade');
  var savedVolume = localStorage.getItem('selectedVolume');
  
  if (savedGrade) {
    document.getElementById('gradeSelect').value = savedGrade;
  }
  if (savedVolume) {
    document.getElementById('volumeSelect').value = savedVolume;
  }
  
  // 添加返回首页按钮功能
  document.getElementById('backHomeBtn').addEventListener('click', function() {
    window.location.href = '../index.html';
  });

      var randomPoemData = null;
      var weeklyPoemSelected = null;
      var savedPoem = "";
      var rawPoemText = "";
      var currentSource = ""; // 新增：当前诗词来源
      var historyRecords = JSON.parse(localStorage.getItem('poemHistory')) || [];
      var answerVisible = false;
      var lastSelectedHistoryIndex = -1; // 记录最后选择的历史记录索引
      var isFromHistory = false; // 标记是否来自历史记录
      
      function updateHistoryUI() {
        var container = document.getElementById('historyContainer');
        var html = '<div class="header"><span>历史记录</span><button id="clearHistoryBtn">清空</button></div>';
        historyRecords.forEach(function(record, index) {
          var dotClass = "";
          if (record.source === "manual") {
            dotClass = "manual-tag";
          } else if (record.source === "weekly") {
            dotClass = "weekly-tag";
          } else if (record.source === "random") {
            dotClass = "random-tag";
          }
          html += '<div class="history-item" data-index="' + index + '">'
                + '<span class="' + dotClass + '">●</span>'
                + '<span class="history-title">' + record.title + '</span> - ' + record.author
                + '</div>';
        });
        container.innerHTML = html;
        var clearHistoryBtn = document.getElementById('clearHistoryBtn');
        if (clearHistoryBtn) {
          clearHistoryBtn.addEventListener('click', function(){
            if (confirm("确定清空所有记录？")) {
              historyRecords = [];
              localStorage.setItem('poemHistory', JSON.stringify(historyRecords));
              updateHistoryUI();
            }
          });
        }
        var items = container.getElementsByClassName('history-item');
        for (var i = 0; i < items.length; i++) {
          items[i].addEventListener('click', function() {
            var idx = parseInt(this.getAttribute('data-index'));
            var rec = historyRecords[idx];
            
            // 保存当前选择的历史记录索引
            lastSelectedHistoryIndex = idx;
            isFromHistory = true;
            
            // 构建完整内容（不包含重复的注释和大意）
            var completeContent = rec.content;
            
            document.getElementById('poemInput').innerHTML = formatMainDisplay(completeContent);
            rawPoemText = completeContent;
            
            // 修复：重置所有状态变量，设置当前来源
            weeklyPoemSelected = null;
            randomPoemData = null;
            currentSource = rec.source;
            
// 如果是weekly类型，需要重新设置weeklyPoemSelected
if (rec.source === "weekly") {
  // 动态识别正文开始位置
  var lines = rec.content.split("\n");
  var contentStartIndex = 2; // 从第3行开始（修改为新的结构）
  
  // 从记录中重构weeklyPoemSelected对象
  weeklyPoemSelected = {
    title: rec.title,
    author: rec.author,
    content: lines.slice(contentStartIndex).join("\n"), // 动态提取正文部分
    week: lines[0], // 提取周次信息
    notes: Array.isArray(rec.notes) ? rec.notes : (rec.notes || []),
    summary: rec.summary || ""
  };
}
            // 如果是random类型，需要重新设置randomPoemData
            else if (rec.source === "random") {
              // 从记录中重构randomPoemData对象
              var lines = rec.content.split("\n");
              randomPoemData = {
                origin: {
                  title: rec.title,
                  author: rec.author,
                  dynasty: lines[1] ? lines[1].replace(/[【】]/g, '').split('】')[0] : "",
                  content: lines.slice(2).join("\n")
                }
              };
            }
            
            updateClearBtnStyle();
          });
          items[i].addEventListener('contextmenu', function(e) {
            e.preventDefault();
            if (confirm("确定删除这条记录？")) {
              var idx = parseInt(this.getAttribute('data-index'));
              historyRecords.splice(idx, 1);
              localStorage.setItem('poemHistory', JSON.stringify(historyRecords));
              updateHistoryUI();
            }
          });
          (function(item){
            let timer;
            item.addEventListener('touchstart', function(e){
              timer = setTimeout(() => {
                if (confirm("确定删除这条记录？")) {
                  var idx = parseInt(item.getAttribute('data-index'));
                  historyRecords.splice(idx, 1);
                  localStorage.setItem('poemHistory', JSON.stringify(historyRecords));
                  updateHistoryUI();
                }
              }, 1500);
            });
            item.addEventListener('touchend', function(e){
              clearTimeout(timer);
            });
          })(items[i]);
        }
      }
      updateHistoryUI();
      
      function addHistoryRecord(record) {
        if (record.source === "manual") {
          let pureText = record.content.replace(/\n/g, "");
          record.title = pureText.substring(0,10);
          record.author = "手动输入";
        }
        
        // 检查是否有重复记录
        var existIndex = historyRecords.findIndex(function(r) {
          return r.content === record.content && r.title === record.title && r.author === record.author;
        });
        
        if (existIndex !== -1) { 
          historyRecords.splice(existIndex, 1); 
        }
        
        historyRecords.unshift(record);
        if (historyRecords.length > 20) { 
          historyRecords = historyRecords.slice(0, 20); 
        }
        localStorage.setItem('poemHistory', JSON.stringify(historyRecords));
        updateHistoryUI();
      }
      
      function updateClearBtnStyle() {
        var poemInput = document.getElementById('poemInput');
        var clearBtn = document.getElementById('clearBtn');
        var content = poemInput.innerText.trim();
        clearBtn.style.backgroundColor = (!content || content === "暂未提供该年级数据") ? "#999" : "#fc6159";
      }
      
      function getCurrentPoemArray() {
        var grade = document.getElementById('gradeSelect').value;
        var volume = document.getElementById('volumeSelect').value;
        var poemArr;
      if (grade === "1") {
        poemArr = (volume === "上册") ? gradeOneUpperPoems : gradeOneLowerPoems;
      } else if (grade === "2") {
        poemArr = (volume === "上册") ? gradeTwoUpperPoems : gradeTwoLowerPoems;
      } else if (grade === "3") {
        poemArr = (volume === "上册") ? gradeThreeUpperPoems : gradeThreeLowerPoems;
      } else if (grade === "4") {
        poemArr = (volume === "上册") ? grade4UpperPoems : grade4LowerPoems;
      } else if (grade === "5") {
        poemArr = (volume === "上册") ? grade5UpperPoems : grade5LowerPoems;
      } else if (grade === "6") {
        poemArr = (volume === "上册") ? grade6UpperPoems : grade6LowerPoems;
      }
  // 添加调试信息和安全返回
  console.log("getCurrentPoemArray:", grade, volume, poemArr ? poemArr.length : "undefined");
  return poemArr || []; // 确保返回数组而不是undefined
      }
      
function updateWeekSelect() {
  var poemArr = getCurrentPoemArray();
  
  // 添加检查，防止访问undefined的.length属性
  if (!poemArr || poemArr.length === 0) {
    console.log("诗词数组为空或未定义", poemArr);
    return;
  }
  
  var weekSelect = document.getElementById('weekSelect');
  weekSelect.innerHTML = "";
  var emptyOption = document.createElement('option');
  emptyOption.value = "";
  emptyOption.text = "周次";
  weekSelect.appendChild(emptyOption);
  var randomOption = document.createElement('option');
  randomOption.value = "random";
  randomOption.text = "随机";
  weekSelect.appendChild(randomOption);
  for (let i = 0; i < poemArr.length; i++) {
    let option = document.createElement('option');
    option.value = i;
    option.text = poemArr[i].week.replace(/^第/, "").replace(/周$/, "");
    weekSelect.appendChild(option);
  }
  weekSelect.selectedIndex = 0;
  if (weekSelect.value === "") {
    document.getElementById('poemInput').innerHTML = "";
    weeklyPoemSelected = null;
  }
}
      
      document.getElementById('weekSelect').addEventListener("mousedown", function(){
        if (this.value === "random") {
          updateWeeklyPoem();
        }
      });
      
function populatePoemInput(poem) {
  // 获取当前选择的年级和册别
  var gradeSelect = document.getElementById('gradeSelect');
  var volumeSelect = document.getElementById('volumeSelect');
  var gradeText = gradeSelect.options[gradeSelect.selectedIndex].text;
  var volumeText = volumeSelect.value;
  
  // 在周次前面添加年级和册别信息
  var fullPoem = gradeText + volumeText + " " + poem.week + " " + "《" + poem.title + "》" + "\n";

  // 检查是否有作者信息，如果author不为空且不是空字符串，才添加作者行
  if (poem.author && poem.author.trim() !== "") {
    fullPoem += poem.author + "\n";
  } else {
    fullPoem += "\n"; // 如果没有作者，添加一个空行占位
  }

  fullPoem += poem.content;
  
  // 添加注释和大意
  if (poem.notes && Array.isArray(poem.notes)) {
    fullPoem += "\n\n【注释】\n" + poem.notes.join("\n");
  }
  
  if (poem.summary && typeof poem.summary === "string") {
    fullPoem += "\n\n【大意】\n" + poem.summary;
  }
  
  rawPoemText = fullPoem;
  currentSource = "weekly"; // 设置来源
  isFromHistory = false; // 重置标记
  var formatted = formatMainDisplay(fullPoem); // 使用新函数
  document.getElementById('poemInput').innerHTML = formatted;
  updateClearBtnStyle();
}
      
      function updateWeeklyPoem() {
        updateWeekSelect();
        var weekSelect = document.getElementById('weekSelect');
        var poemArr = getCurrentPoemArray();
        if (weekSelect.value === "") {
          document.getElementById('poemInput').innerHTML = "";
          weeklyPoemSelected = null;
        } else if (weekSelect.value === "random") {
          let randomIndex = Math.floor(Math.random() * poemArr.length);
          let poem = poemArr[randomIndex];
          populatePoemInput(poem);
          weeklyPoemSelected = poem;
          randomPoemData = null; // 重置random数据
          
          // 只有不是从历史记录来的时候才添加历史记录
          if (!isFromHistory) {
            let record = {
              id: Date.now() + "_" + Math.random().toString(36).substr(2,5),
              title: poem.title,
              author: poem.author,
              content: rawPoemText,
              notes: poem.notes || [],
              summary: poem.summary || "",
              source: "weekly"
            };
            addHistoryRecord(record);
          }
        } else {
          let index = parseInt(weekSelect.value);
          let poem = poemArr[index];
          populatePoemInput(poem);
          weeklyPoemSelected = poem;
          randomPoemData = null; // 重置random数据
          
          // 只有不是从历史记录来的时候才添加历史记录
          if (!isFromHistory) {
            let record = {
              id: Date.now() + "_" + Math.random().toString(36).substr(2,5),
              title: poem.title,
              author: poem.author,
              content: rawPoemText,
              notes: poem.notes || [],
              summary: poem.summary || "",
              source: "weekly"
            };
            addHistoryRecord(record);
          }
        }
      }
      
      document.getElementById('gradeSelect').addEventListener('change', function() {
  // 保存选择到本地存储
  localStorage.setItem('selectedGrade', this.value);
  updateWeeklyPoem();
});
      document.getElementById('volumeSelect').addEventListener('change', function() {
  // 保存选择到本地存储
  localStorage.setItem('selectedVolume', this.value);
  updateWeeklyPoem();
});
      document.getElementById('weekSelect').addEventListener('change', function() {
        if (this.value === "") {
          document.getElementById('poemInput').innerHTML = "";
          weeklyPoemSelected = null;
        } else if (this.value === "random") {
          let poemArr = getCurrentPoemArray();
          let randomIndex = Math.floor(Math.random() * poemArr.length);
          let poem = poemArr[randomIndex];
          populatePoemInput(poem);
          weeklyPoemSelected = poem;
          randomPoemData = null; // 重置random数据
          
          // 只有不是从历史记录来的时候才添加历史记录
          if (!isFromHistory) {
            let record = {
              id: Date.now() + "_" + Math.random().toString(36).substr(2,5),
              title: poem.title,
              author: poem.author,
              content: rawPoemText,
              notes: poem.notes || [],
              summary: poem.summary || "",
              source: "weekly"
            };
            addHistoryRecord(record);
          }
        } else {
          let index = parseInt(this.value);
          let poemArr = getCurrentPoemArray();
          let poem = poemArr[index];
          populatePoemInput(poem);
          weeklyPoemSelected = poem;
          randomPoemData = null; // 重置random数据
          
          // 只有不是从历史记录来的时候才添加历史记录
          if (!isFromHistory) {
            let record = {
              id: Date.now() + "_" + Math.random().toString(36).substr(2,5),
              title: poem.title,
              author: poem.author,
              content: rawPoemText,
              notes: poem.notes || [],
              summary: poem.summary || "",
              source: "weekly"
            };
            addHistoryRecord(record);
          }
        }
      });
      
      document.getElementById('fillRandomBtn').addEventListener('click', function() {
        var btn = this;
        btn.innerText = "正在加载";
        if (typeof jinrishici !== "undefined" && typeof jinrishici.load === "function") {
          try {
jinrishici.load(function(result) {
  randomPoemData = result.data;
  weeklyPoemSelected = null; // 重置weekly数据
  btn.innerText = "随机诗词";
  var fullPoem = "《" + randomPoemData.origin.title + "》" + "\n" +
                 "【" + randomPoemData.origin.dynasty + "】" + randomPoemData.origin.author + "\n" +
                 randomPoemData.origin.content;
  var formatted = formatMainDisplay(fullPoem); // 使用新函数
  document.getElementById('poemInput').innerHTML = formatted;
  rawPoemText = fullPoem;
  currentSource = "random"; // 设置来源
  isFromHistory = false; // 重置标记
  updateClearBtnStyle();
  // 添加随机诗词历史记录
  var record = {
    id: Date.now() + "_" + Math.random().toString(36).substr(2,5),
    title: randomPoemData.origin.title,
    author: randomPoemData.origin.author,
    content: rawPoemText,
    source: "random"
  };
  addHistoryRecord(record);
});
          } catch (e) {
            console.error(e);
            btn.innerText = "随机诗词";
            alert("加载诗词时出现错误，请稍后再试");
          }
        } else {
          btn.innerText = "随机诗词";
          alert("诗词 API 未加载，请检查网络连接");
        }
      });
      
      document.getElementById('clearBtn').addEventListener('click', function() {
        document.getElementById('poemInput').innerHTML = "";
        // 清空时重置所有状态
        weeklyPoemSelected = null;
        randomPoemData = null;
        currentSource = "";
        rawPoemText = "";
        lastSelectedHistoryIndex = -1;
        isFromHistory = false;
        updateClearBtnStyle();
      });
      
      document.getElementById('generateBtn').addEventListener('click', function() {
        var poemInput = document.getElementById('poemInput');
        var fullText = poemInput.innerText.trim();
        if (!fullText || fullText === "暂未提供该年级数据") {
          alert("请输入或在下方选择诗词后，再生成九宫格");
          return;
        }
        var poemAnswer = document.getElementById('poemAnswer');
        poemAnswer.innerHTML = "↑点击按钮或本区域 显示/隐藏 答案";
        poemAnswer.style.color = "#888";
        answerVisible = false;
        document.getElementById('showAnswerBtn').innerText = "答案";
        
        var body = fullText;
        if (fullText.startsWith("《") || fullText.indexOf("《") !== -1) {
          var parts = fullText.split("\n");
          if (parts.length >= 3) {
            body = parts.slice(2).join("\n");
          }
        }
        rawPoemText = fullText;
        savedPoem = body;
        var chars = body.match(/[\u4e00-\u9fa5]/g);
        if (!chars || chars.length === 0) {
          alert("未检测到有效汉字");
          return;
        }
        var required = 9;
        if (chars.length < required) {
          var times = Math.ceil(required / chars.length);
          var repeated = [];
          for (var i = 0; i < times; i++){
            repeated = repeated.concat(chars);
          }
          chars = repeated.slice(0, required);
        }
        for (let i = chars.length - 1; i > 0; i--){
          const j = Math.floor(Math.random() * (i + 1));
          [chars[i], chars[j]] = [chars[j], chars[i]];
        }
        var selectedChars = chars.slice(0, 9);
        var gridText = document.getElementById('gridText');
        gridText.innerHTML = "";
        for (let i = 0; i < selectedChars.length; i++){
          var cell = document.createElement('div');
          cell.className = "grid-cell";
          cell.innerHTML = '<span class="cell-letter">' + selectedChars[i] + '</span>';
          cell.addEventListener("click", function(){
            var span = this.querySelector(".cell-letter");
            span.style.opacity = "0";
            let cellThis = this;
            setTimeout(function(){
              var gridCells = document.getElementsByClassName("grid-cell");
              var otherLetters = [];
              for (var j = 0; j < gridCells.length; j++){
                if (gridCells[j] !== cellThis){
                  var s = gridCells[j].querySelector(".cell-letter");
                  otherLetters.push(s.innerText);
                }
              }
              var allChars = body.match(/[\u4e00-\u9fa5]/g) || [];
              var candidates = allChars.filter(function(ch){
                return otherLetters.indexOf(ch) === -1;
              });
              if (candidates.length === 0){
                alert("没有可替换的新汉字");
                span.style.opacity = "1";
                return;
              }
              var newChar = candidates[Math.floor(Math.random() * candidates.length)];
              span.innerText = newChar;
              span.style.opacity = "1";
            }, 500);
          });
          gridText.appendChild(cell);
        }
        // 切换到九宫格模式
        var container = document.getElementById('mainContainer');
        container.classList.add("grid-mode");
        document.getElementById('poemInput').style.display = 'none';
        document.getElementById('weeklyContainer').style.display = 'none';
        document.getElementById('fillContainer').style.display = 'none';
        document.getElementById('generateButtonsContainer').style.display = 'none';
        document.getElementById('random-poem').style.display = 'none';
        document.getElementById('submenu').style.display = 'none';
        document.getElementById('historyContainer').style.display = 'none';

// 处理历史记录
if (isFromHistory && lastSelectedHistoryIndex !== -1) {
  // 如果是从历史记录选择的，将该记录移到第一位并删除原位置
  var selectedRecord = historyRecords[lastSelectedHistoryIndex];
  historyRecords.splice(lastSelectedHistoryIndex, 1); // 删除原位置
  historyRecords.unshift(selectedRecord); // 添加到第一位
  
  // 限制历史记录数量
  if (historyRecords.length > 20) {
    historyRecords = historyRecords.slice(0, 20);
  }
  
  localStorage.setItem('poemHistory', JSON.stringify(historyRecords));
  updateHistoryUI();
  lastSelectedHistoryIndex = -1; // 重置
  isFromHistory = false; // 重置
}
// 注意：这里不添加新的历史记录，因为选择每周一首时已经添加过了
      });
      
      document.getElementById('showAnswerBtn').addEventListener('click', function(){
  var poemAnswer = document.getElementById('poemAnswer');
  if (!answerVisible) {
    var rawAnswer = "";
    if (weeklyPoemSelected) {
      // 直接使用rawPoemText，因为它已经包含了完整的格式化信息
      rawAnswer = rawPoemText;
    } else if (randomPoemData && !weeklyPoemSelected) {
      rawAnswer = "《" + randomPoemData.origin.title + "》\n" +
                  "【" + randomPoemData.origin.dynasty + "】" + randomPoemData.origin.author + "\n" +
                  randomPoemData.origin.content;
    } else {
      // 修复：对于历史记录中的内容，使用当前的rawPoemText
      rawAnswer = rawPoemText || savedPoem;
    }
    var formatted = formatAnswerNew(rawAnswer);
    var finalAnswer = formatAnswerDisplay(formatted);
    poemAnswer.innerHTML = finalAnswer;
    poemAnswer.style.color = "#000";
    this.innerText = '隐藏';
    answerVisible = true;
  } else {
    poemAnswer.innerHTML = "↑点击按钮或本区域 显示/隐藏 答案";
    poemAnswer.style.color = "#888";
    this.innerText = '答案';
    answerVisible = false;
  }
});
      
      document.getElementById('poemAnswer').addEventListener('click', function(){
        document.getElementById('showAnswerBtn').click();
      });
      
      document.getElementById('searchBtn').addEventListener('click', function(){
        var searchQuery = "";
        if (weeklyPoemSelected) {
          searchQuery = weeklyPoemSelected.title + " " + weeklyPoemSelected.author;
        } else if (randomPoemData && randomPoemData.origin && randomPoemData.origin.title) {
          searchQuery = randomPoemData.origin.title + " " +
                        randomPoemData.origin.dynasty + " " +
                        randomPoemData.origin.author;
        } else if (savedPoem) {
          searchQuery = savedPoem;
        }
        if (!searchQuery) {
          alert("没有可搜索的诗句");
          return;
        }
        var url = 'https://www.baidu.com/s?wd=' + encodeURIComponent(searchQuery);
        window.open(url, '_blank');
      });
      
      document.getElementById('refreshBtn').addEventListener('click', function(){
        if (!rawPoemText) {
          alert("没有可刷新的内容");
          return;
        }
        var poemAnswer = document.getElementById('poemAnswer');
        var wasVisible = answerVisible;
        document.getElementById('generateBtn').click();
        if (wasVisible) {
          var gradeSelect = document.getElementById('gradeSelect');
          var gradeText = gradeSelect.options[gradeSelect.selectedIndex].text;
          var volumeText = document.getElementById('volumeSelect').value;
          var rawAnswer = "";
          if (weeklyPoemSelected) {
            rawAnswer = gradeText + volumeText + " " + weeklyPoemSelected.week + " " + "《" + weeklyPoemSelected.title + "》" + "\n" +
                        weeklyPoemSelected.author + "\n" +
                        weeklyPoemSelected.content;
            
            // 添加注释和大意，避免重复
            if (!rawAnswer.includes('【注释】') && !rawAnswer.includes('【大意】')) {
            //  var { notesText, summaryText } = buildNotesAndSummaryText(weeklyPoemSelected);
            //  rawAnswer += notesText + summaryText;
            }
          } else if (randomPoemData && !weeklyPoemSelected) {
            rawAnswer = "《" + randomPoemData.origin.title + "》\n" +
                        "【" + randomPoemData.origin.dynasty + "】" + randomPoemData.origin.author + "\n" +
                        randomPoemData.origin.content;
          } else {
            rawAnswer = rawPoemText || savedPoem;
          }
          var formatted = formatAnswerNew(rawAnswer);
          var finalAnswer = formatAnswerDisplay(formatted);
          poemAnswer.innerHTML = finalAnswer;
          poemAnswer.style.color = "#000";
          document.getElementById('showAnswerBtn').innerText = '隐藏';
          answerVisible = true;
        }
      });
      
      document.getElementById('backBtn').addEventListener('click', function(){
        // 恢复主界面显示
        var container = document.getElementById('mainContainer');
        container.classList.remove("grid-mode");
        document.getElementById('poemInput').style.display = 'block';
        document.getElementById('poemInput').innerHTML = "";
        document.getElementById('weeklyContainer').style.display = 'block';
        document.getElementById('fillContainer').style.display = 'block';
        document.getElementById('generateButtonsContainer').style.display = 'flex';
        document.getElementById('random-poem').style.display = 'block';
        document.getElementById('gridText').style.display = 'none';
        document.getElementById('answer-buttons').style.display = 'none';
        document.getElementById('poemAnswer').style.display = 'none';
        answerVisible = false;
        document.getElementById('showAnswerBtn').innerText = '答案';
        document.getElementById('historyContainer').style.display = 'block';
        
        // 清理状态
        weeklyPoemSelected = null;
        savedPoem = "";
        rawPoemText = "";
        currentSource = "";
        randomPoemData = null;
        lastSelectedHistoryIndex = -1;
        isFromHistory = false;
      });
      
      document.getElementById('weeklyBtn').addEventListener('click', function(e) {
        var submenu = document.getElementById('submenu');
        if (submenu.style.display === "none" || submenu.style.display === "") {
          var topRect = document.getElementById('weeklyBtn').getBoundingClientRect();
          submenu.style.left = topRect.left + "px";
          submenu.style.top = (topRect.bottom + 5) + "px";
          submenu.style.display = "flex";
          submenu.classList.add("open");
          updateWeeklyPoem();
        } else {
          submenu.style.display = "none";
          submenu.classList.remove("open");
        }
        e.stopPropagation();
      });
      
      document.addEventListener('click', function(e) {
        var weeklyContainer = document.getElementById('weeklyContainer');
        var submenu = document.getElementById('submenu');
        if (!weeklyContainer.contains(e.target)) {
          submenu.style.display = "none";
          submenu.classList.remove("open");
        }
      });
    };
  </script>

  <script>
    // ========== 数据嵌入 ==========

    // ---------- 一年级 ----------
    var gradeOneUpperPoems = [
      { week: "第一周", title: "山村咏怀", author: "[宋] 邵雍", content: "一去二三里，烟村四五家。\n亭台六七座，八九十枝花。", volume: "上册" },
      { week: "第二周", title: "鹅赠鹤", author: "[唐] 白居易", content: "草铺横野六七里，笛弄晚风三四声。\n归来饱饭黄昏后，不脱蓑衣卧月明。", volume: "上册" },
      { week: "第三周", title: "画鸭", author: "[元] 揭傒斯", content: "春草细还生，春雏养渐成。\n茸茸毛色起，应解自呼名。", volume: "上册" },
      { week: "第四周", title: "秋浦歌（其十五）", author: "[唐] 李白", content: "白发三千丈，愁似个长。\n不知明镜里，何处得秋霜。", volume: "上册" },
      { week: "第五周", title: "咏华山", author: "[宋] 寇准", content: "只有天在上，更无山与齐。\n举头红日近，回首白云低。", volume: "上册" },
      { week: "第六周", title: "登乐游原", author: "[唐] 李商隐", content: "向晚意不适，驱车登古原。\n夕阳无限好，只是近黄昏。", volume: "上册" },
      { week: "第七周", title: "采莲童曲（节选）", author: "南朝民歌", content: "泛舟采菱叶，过摘芙蓉花。\n扣楫命童侣，齐声采莲歌。", volume: "上册" },
      { week: "第八周", title: "山中送别", author: "[唐] 王维", content: "山中相送罢，日暮掩柴扉。\n春草明年绿，王孙归不归？", volume: "上册" },
      { week: "第九周", title: "题秋江独钓图", author: "[清] 王士祯", content: "一扁舟，丈丝纶；一寸钩。\n一曲高歌，一人独钓一江秋。", volume: "上册" },
      { week: "第十周", title: "幼女词", author: "[唐] 施肩吾", content: "幼女才六岁，未知巧与拙。\n向夜在堂前，学人拜新月。", volume: "上册" },
      { week: "第十一周", title: "观刈麦", author: "[唐] 白居易", content: "田家少闲月，五月人倍忙。\n夜来南风起，小麦覆陇黄。", volume: "上册" },
      { week: "第十二周", title: "越女词", author: "[唐] 李白", content: "耶溪采莲女，见客棹歌回。\n笑入荷花去，佯羞不出来。", volume: "上册" },
      { week: "第十三周", title: "江行无题", author: "[唐] 钱珝", content: "万木已清霜，江边村事忙。\n故溪黄稻熟，一夜梦中香。", volume: "上册" },
      { week: "第十四周", title: "秋风引", author: "[唐] 刘禹锡", content: "何处秋风至？萧萧送雁群。\n朝来入庭树，孤客最先闻。", volume: "上册" },
      { week: "第十五周", title: "古朗月行（节选）", author: "[唐] 李白", content: "仙人垂两足，桂树何团团。\n白兔捣药成，问言与谁餐？", volume: "上册" },
      { week: "第十六周", title: "三字经（节选）", author: "佚名", content: "为人子，方少时。亲师友，习礼仪。\n香九龄，能温席。孝于亲，所当执。", volume: "上册" }
    ];
    var gradeOneLowerPoems = [
      { week: "第一周", title: "春游曲", author: "[唐] 王涯", content: "万树江边杏，新开一夜风。\n满园深浅色，照在绿波中。", volume: "下册" },
      { week: "第二周", title: "春雪", author: "[唐] 韩愈", content: "新年都未有芳华，二月初惊见草芽。\n白雪却嫌春色晚，故穿庭树作飞花。", volume: "下册" },
      { week: "第三周", title: "杂诗", author: "[唐] 王维", content: "君自故乡来，应知故乡事。\n来日绮窗前，寒梅著花未？", volume: "下册" },
      { week: "第四周", title: "三字经（节选）", author: "佚名", content: "地所生，有草木。此植物，遍水陆。\n有虫鱼，有鸟兽。此动物，能飞走。", volume: "下册" },
      { week: "第五周", title: "相思", author: "[唐] 王维", content: "红豆生南国，春来发几枝。\n愿君多采撷，此物最相思。", volume: "下册" },
      { week: "第六周", title: "春晴", author: "[唐] 王驾", content: "雨前初见花间蕊，雨后全无叶底花。\n蜂蝶纷纷过墙去，却疑春色在邻家。", volume: "下册" },
      { week: "第七周", title: "八阵图", author: "[唐] 杜甫", content: "功盖三分国，名成八阵图。\n江流石不转，遗恨失吞吴。", volume: "下册" },
      { week: "第八周", title: "笠翁对韵（节选）", author: "[清] 李渔", content: "晨对午，夏对冬。下饷对高舂。\n青春对白昼，古柏对苍松。", volume: "下册" },
      { week: "第九周", title: "长干行四首（其二）", author: "[唐] 崔颢", content: "家临九江水，来去九江侧。\n同是长干人，生小不相识。", volume: "下册" },
      { week: "第十周", title: "拜新月", author: "[唐] 李端", content: "开帘见新月，便即下阶拜。\n细语人不闻，北风吹裙带。", volume: "下册" },
      { week: "第十一周", title: "观游鱼", author: "[唐] 白居易", content: "绕池闲步看鱼游，正值儿童弄钓舟。\n一种爱鱼心各异，我来施食尔垂钩。", volume: "下册" },
      { week: "第十二周", title: "苔", author: "[清] 袁枚", content: "白日不到处，青春恰自来。\n苔花如米小，也学牡丹开。", volume: "下册" },
      { week: "第十三周", title: "中秋夜", author: "[唐] 李峤", content: "圆魄上寒空，皆言四海同。\n安知千里外，不有雨兼风？", volume: "下册" },
      { week: "第十四周", title: "击壤歌", author: "上古歌谣", content: "日出而作，日入而息。\n凿井而饮，耕田而食。", volume: "下册" },
      { week: "第十五周", title: "答人", author: "[唐] 太上隐者", content: "偶来松树下，高枕石头眠。\n山中无历日，寒尽不知年。", volume: "下册" },
      { week: "第十六周", title: "剑客", author: "[唐] 贾岛", content: "十年磨一剑，霜刃未曾试。\n今日把示君，谁有不平事？", volume: "下册" }
    ];

    // ---------- 二年级 ----------
    var gradeTwoUpperPoems = [
      { week: "第一周", title: "早梅", author: "[明] 道源", content: "万树寒无色，南枝独有花。\n香闻流水处，影落野人家。", volume: "上册" },
      { week: "第二周", title: "牧童", author: "[唐] 吕岩", content: "草铺横野六七里，笛弄晚风三四声。\n归来饱饭黄昏后，不脱蓑衣卧月明。", volume: "上册" },
      { week: "第三周", title: "晚春田园杂兴", author: "[宋] 范成大", content: "蝴蝶双双入菜花，日长无客到田家。\n鸡飞过篱犬吠窦，知有行商来买茶。", volume: "上册" },
      { week: "第四周", title: "山亭", author: "[唐] 高骈", content: "绿树阴浓夏日长，楼台倒影入池塘。\n水晶帘动微风起，满架蔷薇一院香。", volume: "上册" },
      { week: "第五周", title: "山中", author: "[唐] 王维", content: "荆溪白石出，天寒红叶稀。\n山路元无雨，空翠湿人衣。", volume: "上册" },
      { week: "第六周", title: "逢雪宿芙蓉山主人", author: "[唐] 刘长卿", content: "日暮苍山远，天寒白屋贫。\n柴门闻犬吠，风雪夜归人。", volume: "上册" },
      { week: "第七周", title: "金缕衣", author: "[唐] 杜秋娘", content: "劝君莫惜金缕衣，劝君惜取少年时。\n花开堪折直须折，莫待无花空折枝。", volume: "上册" },
      { week: "第八周", title: "赠范晔", author: "[北魏] 陆凯", content: "折花逢驿使，寄与陇头人。\n江南无所有，聊赠一枝春。", volume: "上册" },
      { week: "第九周", title: "菊花", author: "[唐] 元稹", content: "秋丛绕舍似陶家，遍绕篱边日渐斜。\n不是花中偏爱菊，此花开尽更无花。", volume: "上册" },
      { week: "第十周", title: "陶者", author: "[宋] 梅尧臣", content: "陶尽门前土，屋上无片瓦。\n十指不沾泥，鳞鳞居大厦。", volume: "上册" },
      { week: "第十一周", title: "题乌江亭", author: "[唐] 杜牧", content: "胜败兵家事不期，包羞忍耻是男儿。\n江东子弟多才俊，卷土重来未可知。", volume: "上册" },
      { week: "第十二周", title: "登幽州台歌", author: "[唐] 陈子昂", content: "前不见古人，后不见来者。\n念天地之悠悠，独怆然而涕下！", volume: "上册" },
      { week: "第十三周", title: "遗爱寺", author: "[唐] 白居易", content: "弄石临溪坐，寻花绕寺行。\n时时间鸟语，处处是泉声。", volume: "上册" },
      { week: "第十四周", title: "山中问答", author: "[唐] 李白", content: "问余何事栖碧山，笑而不答心自闲。\n桃花流水窅然去，别有天地非人间。", volume: "上册" },
      { week: "第十五周", title: "山中杂诗", author: "[南北朝] 吴均", content: "山际见来烟，竹中窥落日。\n鸟向檐上飞，云从窗里出。", volume: "上册" },
      { week: "第十六周", title: "竹里馆", author: "[唐] 王维", content: "独坐幽篁里，弹琴复长啸。\n深林人不知，明月来相照。", volume: "上册" }
    ];
    var gradeTwoLowerPoems = [
      { week: "第一周", title: "夜月", author: "[唐] 刘方平", content: "更深月色半人家，北斗阑干南斗斜。\n今夜偏知春气暖，虫声渐透绿窗纱。", volume: "下册" },
      { week: "第二周", title: "柳", author: "[宋] 陆游", content: "春来无处不春风，偏在湖桥柳色中。\n看得浅黄成嫩绿，始知道物有全功。", volume: "下册" },
      { week: "第三周", title: "立春", author: "[宋] 王镒", content: "泥牛鞭散六街尘，生菜挑来叶叶春。\n从此雪消风自软，梅花合让柳条新。", volume: "下册" },
      { week: "第四周", title: "惠州一绝", author: "[宋] 苏轼", content: "罗浮山下四时春，卢橘杨梅次第新。\n日啖荔枝三百颗，不辞长作岭南人。", volume: "下册" },
      { week: "第五周", title: "月夜忆舍弟（节选）", author: "[唐] 杜甫", content: "戍鼓断人行，边秋一雁声。\n露从今夜白，月是故乡明。", volume: "下册" },
      { week: "第六周", title: "乌衣巷", author: "[唐] 刘禹锡", content: "朱雀桥边野草花，乌衣巷口夕阳斜。\n旧时王谢堂前燕，飞入寻常百姓家。", volume: "下册" },
      { week: "第七周", title: "清明", author: "[宋] 王禹偁", content: "无花无酒过清明，兴味萧然似野僧。\n昨日邻家乞新火，晓窗分与读书灯。", volume: "下册" },
      { week: "第八周", title: "端午", author: "[唐] 文秀", content: "节分端午自谁言，万古传闻为屈原。\n堪笑楚江空渺渺，不能洗得直臣冤。", volume: "下册" },
      { week: "第九周", title: "蔽月山房", author: "[明] 王阳明", content: "山近月远觉月小，便道此山大于月。\n若有人眼大如天，当见山高月更阔。", volume: "下册" },
      { week: "第十周", title: "龟虽寿（节选）", author: "[东汉] 曹操", content: "老骥伏枥，志在千里。\n烈士暮年，壮心不已。", volume: "下册" },
      { week: "第十一周", title: "五月十九日大雨", author: "[明] 刘基", content: "风驱急雨洒高城，云压轻雷殷地声。\n雨过不知龙去处，一池草色万蛙鸣。", volume: "下册" },
      { week: "第十二周", title: "新雷", author: "[清] 张维屏", content: "造物无言却有情，每于寒尽觉春生。\n千红万紫安排著，只待新雷第一声。", volume: "下册" },
      { week: "第十三周", title: "劝学（节选）", author: "[战国] 荀子", content: "不积跬步，无以至千里；\n不积小流，无以成江海。", volume: "下册" },
      { week: "第十四周", title: "道德经（节选）", author: "[春秋] 老子", content: "合抱之木，生于毫末；\n九层之台，起于累土；\n千里之行，始于足下。", volume: "下册" },
      { week: "第十五周", title: "题都城南庄", author: "[唐] 崔护", content: "去年今日此门中，人面桃花相映红。\n人面不知何处去，桃花依旧笑春风。", volume: "下册" },
      { week: "第十六周", title: "劳劳亭", author: "[唐] 李白", content: "天下伤心处，劳劳送客亭。\n春风知别苦，不遣柳条青。", volume: "下册" }
    ];

// ---------- 三年级 ----------
var gradeThreeUpperPoems = [
  {
    week: "第一周",
    title: "勤学",
    author: "[北宋] 汪洙",
    content: "学向勤中得，萤窗万卷书。\n三冬今足用，谁笑腹空虚。",
    volume: "上册",
    notes: [
      "①萤窗：指晋代时车胤将萤火虫放入囊袋中，利用萤火虫亮光照书夜读。后以“萤窗”形容勤学苦读。亦借指读书之所。",
      "②空虚：空无，不充实。"
    ],
    summary: "学问是需要勤奋才能得来的，就像前人囊萤取光，勤奋夜读，读很多书。苦学多年，积累了一定的知识，那时候谁还会笑话你胸无点墨，没有学问呢？"
  },
  {
    week: "第二周",
    title: "牧童",
    author: "[唐] 卢肇",
    content: "谁人得似牧童心，牛上横眠秋听深。\n时复往来吹一曲，何愁南北不知音。",
    volume: "上册",
    notes: [
      "①横眠：横躺着睡觉。",
      "②时复：时常。",
      "③知音：知道心思的人。"
    ],
    summary: "谁能比得上牧童的心境呢？他横卧在牛背上睡觉，倾听深秋的风声。在路上时不时还吹上一首曲子，根本就不担心来往行人中有没有知音来欣赏。"
  },
  {
    week: "第三周",
    title: "秋月",
    author: "[南宋] 朱熹",
    content: "清溪流过碧山头，空水澄鲜一色秋。\n隔断红尘三十里，白云红叶两悠悠。",
    volume: "上册",
    notes: [
      "①空水：指夜空和溪中的流水。",
      "②澄鲜：明净、清新的样子。",
      "③红尘：泛指人世间。"
    ],
    summary: "清澈的溪水流过碧绿的山头，一泻而下，澄清的水和蓝天在月色的映照下构成了一幅空明澄澈的秋景画卷。这秋色把人世间隔在三十里之外，空中是悠闲的白云，山上是悠闲自在的红叶，幽静的秋色是多么令人陶醉啊！"
  },
  {
    week: "第四周",
    title: "秋凉晚步",
    author: "[南宋] 杨万里",
    content: "秋气堪悲未必然，轻寒正是可人天。\n绿池落尽红蕖却，荷叶犹开最小钱。",
    volume: "上册",
    notes: [
      "①可人：合人意，叫人喜欢。",
      "②红蕖：红色的荷花。",
      "③却：开尽。",
      "④最小钱：新出荷叶才像小铜钱那么大。"
    ],
    summary: "人们以为秋气使人悲哀，其实未必是这样，轻微地有一点寒意正是气候宜人的季节。绿色池塘里的红色荷花虽然都落尽了，但荷叶还有新长出来的如铜钱那么圆的小叶片。"
  },
  {
    week: "第五周",
    title: "不第后赋菊",
    author: "[唐] 黄巢",
    content: "待到秋来九月八，我花开后百花杀。\n冲天香阵透长安，满城尽带黄金甲。",
    volume: "上册",
    notes: [
      "①九月八：九月九日为重阳节，有登高赏菊的风俗。说“九月八”，既是为了押韵，也表达出一种迫不及待的情绪。",
      "②杀：凋谢。",
      "③黄金甲：金黄色的铠甲，此处指菊花的颜色。"
    ],
    summary: "等到秋天九月重阳节来临的时候，菊花盛开以后别的花就凋谢了。盛开的菊花璀璨夺目，阵阵香气弥漫长安，满城沐浴在芳香的菊意中，遍地都是金黄如铠甲般的菊花。"
  },
  {
    week: "第六周",
    title: "无题",
    author: "[唐] 李商隐",
    content: "相见时难别亦难，东风无力百花残。\n春蚕到死丝方尽，蜡炬成灰泪始干。",
    volume: "上册",
    notes: [
      "①丝：蚕吐出的丝，“丝”与“思”谐音，以“丝”喻“思”，含相思之意。"
    ],
    summary: "见面的机会真是难得，分别时更是难舍难分，暮春离别，百花凋谢，东风也无力挽回。春蚕结茧到死时丝才吐完，蜡烛要燃尽成灰时，蜡油才滴干。"
  },
  {
    week: "第七周",
    title: "花影",
    author: "[北宋] 苏轼",
    content: "重重叠叠上瑶台，几度呼童扫不开。\n刚被太阳收拾去，却教明月送将来。",
    volume: "上册",
    notes: [
      "①重重叠叠：形容地上的花影一层又一层，很浓厚。",
      "②瑶台：华贵的亭台。",
      "③几度：几次。"
    ],
    summary: "亭台上的花影一层又一层，几次叫仆人去打扫，可是花影怎么也扫不走。傍晚太阳下山时，花影刚刚退去，可是月亮升起来了，花影又重重叠叠出现了。"
  },
  {
    week: "第八周",
    title: "孔融让梨",
    author: "[南朝]范晔",
    content: "融四岁，与诸兄共食梨，融辄引小者。\n大人问其故，答曰：‘我小儿，法当取小者。’",
    volume: "上册",
    notes: [
      "①诸：许多。",
      "②辄：就。",
      "③故：原因。",
      "④法：按道理。"
    ],
    summary: "孔融四岁的时候，和许多哥哥一起吃梨，孔融就挑选了最小的梨。大人问孔融为什么要挑最小的，孔融回答说：“我是最小的孩子，按道理应当拿最小的梨。”"
  },
  {
    week: "第九周",
    title: "赠花卿",
    author: "[唐] 杜甫",
    content: "锦城丝管日纷纷，半入江风半入云。\n此曲只应天上有，人间能得几回闻？",
    volume: "上册",
    notes: [
      "①花卿：成都尹崔光远的部将花敬定。",
      "②锦城：即锦官城，此指成都。",
      "③丝管：弦乐器和管乐器，这里泛指音乐。"
    ],
    summary: "锦官城里每日音乐声轻柔悠扬，一半随着江风飘去，一半飘入了云端。这样的乐曲只应该天上才有，人世间哪里能有几回听得见？"
  },
  {
    week: "第十周",
    title: "书事",
    author: "[唐] 王维",
    content: "轻阴阁小雨，深院昼慵开。\n坐看苍苔色，欲上人衣来。",
    volume: "上册",
    notes: [
      "①书事：写眼前所见之景以寄情。",
      "②“轻阴”句：小雨刚停,天气转阴。阁，同“搁”。",
      "③慵：懒。",
      "④苍苔色：青苔的颜色。"
    ],
    summary: "细雨初停，天尚微阴。尽管在白天，还是懒得开院门。坐下来静观苍苔，那可爱的绿色简直要染到人的衣服上来。"
  },
  {
    week: "第十一周",
    title: "赠少年",
    author: "[唐] 温庭筠",
    content: "江海相逢客恨多，秋风叶下洞庭波。\n酒酣夜别淮阴市，月照高楼一曲歌。",
    volume: "上册",
    notes: [
      "①江海：泛指外乡。",
      "②叶下：指秋风吹得树叶纷纷落下，借以渲染客恨。",
      "③市：商业交换场所，古称“市”。"
    ],
    summary: "在外乡漂泊，忽遇友人产生颇多苦恨，黄叶纷纷落下，洞庭湖水波连波。深夜畅饮即将作别淮阴的街市，月照高楼我们引吭高唱离别歌。"
  },
  {
    week: "第十二周",
    title: "长安秋望",
    author: "[唐] 杜牧",
    content: "楼倚霜树外，镜天无一毫。\n南山与秋色，气势两相高。",
    volume: "上册",
    notes: [
      "①霜树：经霜后的树。",
      "②“镜天”句：天空明净如镜,一丝云彩也没有。",
      "③南山：终南山,在长安南。",
      "④“气势”句：满天秋色似与终南山一比高低。"
    ],
    summary: "楼阁倚在经霜的树林外，天空如明镜无纤云一毫。峻拔的南山与清爽秋色，气势互不相让两两争高。"
  },
  {
    week: "第十三周",
    title: "春雪",
    author: "[唐] 刘方平",
    content: "飞雪带春风，徘徊乱绕空。\n君看似花处，偏在洛城东。",
    volume: "上册",
    notes: [
      "①徘徊：来来回回。",
      "②洛城：洛阳。"
    ],
    summary: "春风卷着漫天大雪，飘来飘去，落得到处都是。你看那欣赏雪景的人们，原都是居住在洛阳城中的富贵人家啊！"
  },
  {
    week: "第十四周",
    title: "题君山",
    author: "[唐] 雍陶",
    content: "烟波不动影沉沉，碧色全无翠色深。\n疑是水仙梳洗处，一螺青黛镜中心。",
    volume: "上册",
    notes: [
      "①烟波：洞庭湖的水面。",
      "②水仙：水中女神，即湘君姐妹。",
      "③青黛：女子青黑色发丝。"
    ],
    summary: "八百里洞庭风平浪静，君山的侧影深深地映在水中，仿佛看不见那碧绿的湖水，只有青翠的山色显得更加鲜明。我忽然想起住在君山的湘君姐妹，这里莫非是这些仙女梳洗的地方？你看那一螺画眉的青黛，正放在明亮的镜中央。"
  },
  {
    week: "第十五周",
    title: "秋夕",
    author: "[唐] 杜牧",
    content: "银烛秋光冷画屏，轻罗小扇扑流萤。\n天阶夜色凉如水，坐看牵牛织女星。",
    volume: "上册",
    notes: [
      "①秋夕：秋天的夜晚。",
      "②天阶：露天的石阶。"
    ],
    summary: "秋夜,精美的银色蜡烛发出微弱的光,给画屏上添了几分清冷之色;一位宫女手执绫罗小扇,轻轻地扑打飞舞的萤火虫。天阶上的夜色,清凉如水;坐榻仰望星空,只见牵牛星正远远眺望着织女星。"
  },
  {
    week: "第十六周",
    title: "女娲造人",
    author: "传说",
    content: "俗说天地开辟，未有人民，女娲抟黄土作人。\n剧务，力不暇供，乃引绳于泥中，举以为人。",
    volume: "上册",
    notes: [
      "①抟：同“团”。",
      "②力不暇供：没有足够的力量来完成这项工作。"
    ],
    summary: "民间传说，天地开辟之初，大地上并没有人类，是女娲把黄土捏成团造了人。她干得又忙又累，竭尽全力干还赶不上供应。于是她就拿了绳子把它投入泥浆中，举起绳子一甩，泥浆洒落在地上，就变成了一个个人。后人说,富贵的人是女娲亲手抟黄土造的，而贫贱的人只是女娲用绳沾泥浆，把泥浆洒落在地上变成的。"
  }
];

var gradeThreeLowerPoems = [
  {
    week: "第一周",
    title: "舟夜书所见",
    author: "[清] 查慎行",
    content: "月黑见渔灯，孤光一点萤。\n微微风簇浪，散作满河星。",
    volume: "下册",
    notes: [
      "①孤光：孤零零的灯光。",
      "②簇：拥起。"
    ],
    summary: "黑夜中的河面上，只有渔船还闪烁着点点荧光。微风拂过，水面上泛起层层波澜，灯火散落河中，好似繁星洒落人间。"
  },
  {
    week: "第二周",
    title: "梅花",
    author: "[宋] 王安石",
    content: "白玉堂前一树梅，为谁零落为谁开。\n唯有春风最相惜，一年一度一归来。",
    volume: "下册",
    notes: [
      "①白玉堂：神仙所居，亦喻指富贵人家的邸宅。",
      "②唯有：只有，唯独。"
    ],
    summary: "白玉堂前有一棵梅花树，梅树花谢花开，却不知为谁而开，为谁而谢。年复一年，不见旁人相惜，唯独那吹拂的春风，每年归来相探。"
  },
  {
    week: "第三周",
    title: "紫薇花",
    author: "[唐] 杜牧",
    content: "晓迎秋露一枝新，不占园中最上春。\n桃李无言又何在，向风偏笑艳阳人。",
    volume: "下册",
    notes: [
      "①上春：早春。",
      "②桃李无言：司马迁《史记·李将军列传》：“桃李不言，下自成蹊。”意谓桃李不说话，不夸耀自己，而人们都来欣赏他们，在桃李树下，走出了一条条小路。",
      "③艳阳人：指在艳阳春天里开的花。"
    ],
    summary: "一支初绽的紫薇在秋露里迎接晨光，而不是在早春与百花争奇斗艳。无言的桃花、李花现在不知道在何处，只有紫薇花向着寒冷的秋风，笑对那些争着在艳阳春天开放的花朵。"
  },
  {
    week: "第四周",
    title: "偶步",
    author: "[清] 袁枚",
    content: "偶步西廊下，幽兰一朵开。\n是谁先报信，便有蜜蜂来。",
    volume: "下册",
    notes: [
      "①偶步：偶尔散步。"
    ],
    summary: "偶尔来到西边长廊处散步，惊喜地看到一朵兰花在廊下静静地开放着。是谁先把兰花开放的信息传出去的呢？不然怎么会有蜜蜂比我还早来。"
  },
  {
    week: "第五周",
    title: "春风",
    author: "[唐] 白居易",
    content: "春风先发苑中梅，樱杏桃梨次第开。\n荠花榆荚深村里，亦道春风为我来。",
    volume: "下册",
    notes: [
      "①发：开。",
      "②我：指榆荚，此处暗指地位不高的人。"
    ],
    summary: "春风先将京城花园里的早梅吹开了，然后让樱杏桃李也竞相绽放，使人感到生机勃勃。春风的来临也给乡村带来了欢笑，春风拂过，田野里开放的荠花榆荚欢呼雀跃，欣喜地称道：“春风为我而来！”"
  },
  {
    week: "第六周",
    title: "渡汉江",
    author: "[唐] 宋之问",
    content: "岭外音书断，经冬复历春。\n近乡情更怯，不敢问来人。",
    volume: "下册",
    notes: [
      "①汉江：汉水。长江最大支流，源出陕西，经湖北流入长江。",
      "②岭外：五岭以南的广东省广大地区，通常称岭南。唐代常作罪臣的流放地。",
      "③书：信。",
      "④来人：渡汉江时遇到的从家乡来的人。"
    ],
    summary: "流放岭南与亲人断绝了音信，熬过了冬天又经历一个新春。越走近故乡心里就越是胆怯，不敢打听从家那边过来的人。"
  },
  {
    week: "第七周",
    title: "盘古传说（一）",
    author: "传说",
    content: "天地混沌如鸡子，盘古生其中。\n万八千岁，天地开辟，阳清为天，阴浊为地。",
    volume: "下册",
    notes: [
      "①混沌：模糊一团。",
      "②鸡子：鸡蛋。",
      "③阳清：轻而清的阳气。",
      "④阴浊：重而浊的阴气。"
    ],
    summary: "世界开辟以前，天和地混混沌沌地成一团，像个鸡蛋一样，盘古就生在这当中。过了一万八千年，天地分开了，轻而清的阳气上升为天，重而浊的阴气下沉为地。"
  },
  {
    week: "第八周",
    title: "秋夜寄邱员外",
    author: "[唐] 韦应物",
    content: "怀君属秋夜，散步咏凉天。\n空山松子落，幽人应未眠。",
    volume: "下册",
    notes: [
      "①属：正值，适逢，恰好。",
      "②幽人：幽居隐逸的人，悠闲的人，此处指邱员外。"
    ],
    summary: "怀念你竟在这深秋的夜晚，散步咏叹多么寒凉的霜天。想此刻空山中正掉落松子，幽居的友人一定还未安眠。"
  },
  {
    week: "第九周",
    title: "白石滩",
    author: "[唐] 王维",
    content: "清浅白石滩，绿蒲向堪把。\n家住水东西，浣纱明月下。",
    volume: "下册",
    notes: [
      "①向：临近，将近。",
      "②堪：能够，可以。"
    ],
    summary: "清澈见底的白石浅滩，嫩绿的蒲草可以满把采摘。一群少女住在绿水两旁，趁着皎洁的月色洗衣浣纱。"
  },
  {
    week: "第十周",
    title: "送别",
    author: "[唐] 王维",
    content: "下马饮君酒，问君何所之？\n君言不得意，归卧南山陲。\n但去莫复问，白云无尽时。",
    volume: "下册",
    notes: [
      "①饮君酒：劝君饮酒。饮，使......喝。",
      "②何所之：去哪里。之，往。",
      "③归卧：隐居。",
      "④陲：边缘。"
    ],
    summary: "请你下马来喝一杯美酒，想问问朋友你要去往哪里？你说因为生活不得意，要回乡隐居在终南山旁。只管去吧我不会再追问，那里正有绵延不尽的白云，在天空中飘荡。"
  },
  {
    week: "第十一周",
    title: "花下醉",
    author: "[唐] 李商隐",
    content: "寻芳不觉醉流霞，倚树沉眠日已斜。\n客散酒醒深夜后，更持红烛赏残花。",
    volume: "下册",
    notes: [
      "①芳：花。",
      "②流霞：神话传说中一种仙酒。"
    ],
    summary: "探寻花儿，不知不觉中为美酒所醉。靠着树深深地睡了，不觉天色已晚，日已西斜。深夜了，客人们都散去了。主人酒醒了，赏花之意更浓了。手拿红烛静心观赏这行将凋零的残花在生命的最后瞬间现出光华。"
  },
  {
    week: "第十二周",
    title: "桑茶坑道中",
    author: "[宋] 杨万里",
    content: "晴明风日雨干时，草满花堤水满溪。\n童子柳阴眠正着，一牛吃过柳阴西。",
    volume: "下册",
    notes: [
      "①风日：风和日丽。"
    ],
    summary: "雨后的晴天，风和日丽，地面上的雨水已经蒸发得无踪无影。小溪里的流水却涨满河槽，岸边野草繁茂，野花肆意开放。柳阴里，一位小牧童躺在草地上睡梦正酣。而那头牛只管埋头吃草，越走越远，直吃到柳林西面。"
  },
  {
    week: "第十三周",
    title: "闲居初夏午睡起（其一）",
    author: "[宋] 杨万里",
    content: "梅子留酸软齿牙，芭蕉分绿与窗纱。\n日长睡起无情思，闲看儿童捉柳花。",
    volume: "下册",
    notes: [
      "①无情思：没有情绪，指无所适从，不知做什么好。",
      "②柳花：柳絮。"
    ],
    summary: "梅子味道很酸，吃过之后，余酸还残留在牙齿之间。芭蕉初长，而绿阴映衬到纱窗上。春去夏来，日长人倦，午睡后起来，情绪无聊。我闲着无事观看儿童戏捉空中飘飞的柳絮。"
  },
  {
    week: "第十四周",
    title: "竹枝词（其一）",
    author: "[唐] 刘禹锡",
    content: "杨柳青青江水平，闻郎江上唱歌声。\n东边日出西边雨，道是无晴却有晴。",
    volume: "下册",
    notes: [
      "①竹枝词：巴渝（今四川省重庆市）一带的民歌。",
      "②晴：与“情”同音，诗人用谐音双关的手法，表面上说天气，实际上是说这歌声好像“无情”，又好像“有情”，难以捉摸。"
    ],
    summary: "杨柳青翠，江水平静。岸上忽然传来情郎那熟悉的歌声。这就像东边出太阳，西边下雨，你说它不是晴天，它又是晴天。"
  },
  {
    week: "第十五周",
    title: "江南逢李龟年",
    author: "[唐] 杜甫",
    content: "岐王宅里寻常见，崔九堂前几度闻。\n正是江南好风景，落花时节又逢君。",
    volume: "下册",
    notes: [
      "①寻常：经常。",
      "②落花时节：暮春，通常指阴历三月。"
    ],
    summary: "当年我经常在岐王与崔九的住宅里见到你，并听到你的歌声。现在正好是江南风景秀美的时候，在这暮春季节再次遇见了你。"
  },
  {
    week: "第十六周",
    title: "鱼我所欲也（节选）",
    author: "《孟子·告子上》",
    content: "鱼，我所欲也；熊掌，亦我所欲也。\n二者不可得兼，舍鱼而取熊掌者也。\n生，亦我所欲也；义，亦我所欲也。\n二者不可得兼，舍生而取义者也。",
    volume: "下册",
    notes: [
      "①亦：也。",
      "②欲：喜爱。",
      "③得兼：两种东西都得到。"
    ],
    summary: "鱼是我所想要的，熊掌也是我所想要的。如果这两种东西不能同时得到，那么我就只好放弃鱼而选取熊掌了。生命是我所想要的，道义也是我所想要的。如果这两样不能同时都具有的话，那么我只好牺牲生命而选取道义了。"
  }
];

    // ---------- 四年级 ----------
    var grade4UpperPoems = [
      { "week": "第一周", "title": "过华清宫绝句·其一", "author": "[唐] 杜牧", "content": "长安回望绣成堆，山顶千门次第开。\n一骑红尘妃子笑，无人知是荔枝来。", "volume": "上册" },
      { "week": "第二周", "title": "木棉", "author": "[清] 张维屏", "content": "攀枝一树艳东风，日在珊瑚顶上红。\n春到岭南花不小，众芳丛里识英雄。", "volume": "上册" },
      { "week": "第三周", "title": "碛中作", "author": "[唐] 岑参", "content": "走马西来欲到天，辞家见月两回圆。\n今夜不知何处宿，平沙万里绝人烟。", "volume": "上册" },
      { "week": "第四周", "title": "蜀道后期", "author": "[唐] 张说", "content": "客心争日月，来往预期程。\n秋风不相待，先至洛阳城。", "volume": "上册" },
      { "week": "第五周", "title": "何满子", "author": "[唐] 张祜", "content": "故国三千里，深宫二十年。\n一声何满子，双泪落君前。", "volume": "上册" },
      { "week": "第六周", "title": "问刘十九", "author": "[唐] 白居易", "content": "绿蚁新醅酒，红泥小火炉。\n晚来天欲雪，能饮一杯无？", "volume": "上册" },
      { "week": "第七周", "title": "终南望余雪", "author": "[唐] 祖咏", "content": "终南阴岭秀，积雪浮云端。\n林表明霁色，城中增暮寒。", "volume": "上册" },
      { "week": "第八周", "title": "雪梅", "author": "[宋] 卢梅坡", "content": "梅雪争春未肯降，骚人阁笔费评章。\n梅须逊雪三分白，雪却输梅一段香。", "volume": "上册" },
      { "week": "第九周", "title": "题诗后", "author": "[唐] 贾岛", "content": "两句三年得，一吟双泪流。\n知音如不赏，归卧故山秋。", "volume": "上册" },
      { "week": "第十周", "title": "离思·其四", "author": "[唐] 元稹", "content": "曾经沧海难为水，除却巫山不是云。\n取次花丛懒回顾，半缘修道半缘君。", "volume": "上册" },
      { "week": "第十一周", "title": "望月怀远", "author": "[唐] 张九龄", "content": "海上生明月，天涯共此时。\n情人怨遥夜，竟夕起相思。\n灭烛怜光满，披衣觉露滋。\n不堪盈手赠，还寝梦佳期。", "volume": "上册" },
      { "week": "第十二周", "title": "城东早春", "author": "[唐] 杨巨源", "content": "诗家清景在新春，绿柳才黄半未匀。\n若待上林花似锦，出门俱是看花人。", "volume": "上册" },
      { "week": "第十三周", "title": "贾生", "author": "[唐] 李商隐", "content": "宣室求贤访逐臣，贾生才调更无伦。\n可怜夜半虚前席，不问苍生问鬼神。", "volume": "上册" },
      { "week": "第十四周", "title": "喜见外弟又言别", "author": "[唐] 李益", "content": "十年离乱后，长大一相逢。\n问姓惊初见，称名忆旧容。\n别来沧海事，语罢暮天钟。\n明日巴陵道，秋山又几重。", "volume": "上册" },
      { "week": "第十五周", "title": "莫如树人", "author": "[春秋] 管仲", "content": "一年之计，莫如树谷；\n十年之计，莫如树木；\n终身之计，莫如树人。\n一树一获者，谷也；\n一树十获者，木也；\n一树百获者，人也。", "volume": "上册" },
      { "week": "第十六周", "title": "读书出入法", "author": "[南宋] 陈善", "content": "读书须知出入法。\n始当所以入，终当所以出。\n见得亲切，此是入书法；\n用得透脱，此是出书法。\n盖不能入得书，则不知古人用心处；\n不能出得书，则又死在言下。", "volume": "上册" }
    ];
    var grade4LowerPoems = [
      { "week": "第一周", "title": "小雨", "author": "[宋] 杨万里", "content": "雨来细细复疏疏，纵不能多不肯无。\n似妒诗人山入眼，千峰故隔一帘珠。", "volume": "下册" },
      { "week": "第二周", "title": "鹧鸪天", "author": "[宋] 晏几道", "content": "彩袖殷勤捧玉钟，当年拚却醉颜红。\n舞低杨柳楼心月，歌尽桃花扇底风。\n从别后，忆相逢，几回魂梦与君同。\n今宵剩把银釭照，犹恐相逢是梦中。", "volume": "下册" },
      { "week": "第三周", "title": "雨后田间杂纪·其二", "author": "[宋] 杨万里", "content": "田水高低各斗鸣，溪流奔放更欢声。\n小儿倒捻青梅朵，独立茅檐看客行。", "volume": "下册" },
      { "week": "第四周", "title": "舟过安仁·其三", "author": "[宋] 杨万里", "content": "一叶渔船两小童，收篙停棹坐船中。\n怪生无雨都张伞，不是遮头是使风。", "volume": "下册" },
      { "week": "第五周", "title": "南溪弄水回望山园梅花", "author": "[宋] 杨万里", "content": "梅山未到未教休，到得梅山始欲愁。\n知道望乡看不见，也须一步一回头。", "volume": "下册" },
      { "week": "第六周", "title": "咏兰花", "author": "[明] 张羽", "content": "能白更兼黄，无人亦自芳。\n寸心原不大，容得许多香。", "volume": "下册" },
      { "week": "第七周", "title": "约客", "author": "[宋] 赵师秀", "content": "黄梅时节家家雨，青草池塘处处蛙。\n有约不来过夜半，闲敲棋子落灯花。", "volume": "下册" },
      { "week": "第八周", "title": "秋词", "author": "[唐] 刘禹锡", "content": "自古逢秋悲寂寥，我言秋日胜春朝。\n晴空一鹤排云上，便引诗情到碧霄。", "volume": "下册" },
      { "week": "第九周", "title": "桃花溪", "author": "[唐] 张旭", "content": "隐隐飞桥隔野烟，石矶西畔问渔船。\n桃花尽日随流水，洞在清溪何处边？", "volume": "下册" },
      { "week": "第十周", "title": "终南山", "author": "[唐] 王维", "content": "太乙近天都，连山接海隅。\n白云回望合，青霭入看无。\n分野中峰变，阴晴众壑殊。\n欲投人处宿，隔水问樵夫。", "volume": "下册" },
      { "week": "第十一周", "title": "海棠", "author": "[宋] 苏轼", "content": "东风袅袅泛崇光，香雾空蒙月转廊。\n只恐夜深花睡去，故烧高烛照红妆。", "volume": "下册" },
      { "week": "第十二周", "title": "赤壁", "author": "[唐] 杜牧", "content": "折戟沉沙铁未销，自将磨洗认前朝。\n东风不与周郎便，铜雀春深锁二乔。", "volume": "下册" },
      { "week": "第十三周", "title": "赠别二首·其一", "author": "[唐] 杜牧", "content": "娉娉袅袅十三余，豆蔻梢头二月初。\n春风十里扬州路，卷上珠帘总不如。", "volume": "下册" },
      { "week": "第十四周", "title": "长干行二首·其一", "author": "[唐] 李白", "content": "妾发初覆额，折花门前剧。\n郎骑竹马来，绕床弄青梅。\n同居长干里，两小无嫌猜。", "volume": "下册" },
      { "week": "第十五周", "title": "上善若水", "author": "[春秋] 老子", "content": "上善若水，水善利万物而不争。\n处众人之所恶，故几于道。", "volume": "下册" },
      { "week": "第十六周", "title": "卧薪尝胆", "author": "[西汉] 司马迁", "content": "吴既赦越，越王勾践反国，\n乃苦身焦思，置胆于坐，\n坐卧即仰胆，饮食亦尝胆也。\n曰：\"女忘会稽之耻邪？\"\n身自耕作，夫人自织；\n食不加肉，衣不重采；\n折节下贤人，厚遇宾客；\n振贫吊死，与百姓同其劳。", "volume": "下册" }
    ];

    // ---------- 五年级 ----------
    var grade5UpperPoems = [
      { "week": "第一周", "title": "感遇·其一", "author": "[唐] 张九龄", "content": "兰叶春葳蕤，桂华秋皎洁。\n欣欣此生意，自尔为佳节。\n谁知林栖者，闻风坐相悦。\n草木有本心，何求美人折？", "volume": "上册" },
      { "week": "第二周", "title": "登飞来峰", "author": "[宋] 王安石", "content": "飞来山上千寻塔，闻说鸡鸣见日升。\n不畏浮云遮望眼，自缘身在最高层。", "volume": "上册" },
      { "week": "第三周", "title": "醉花阴", "author": "[宋] 李清照", "content": "薄雾浓云愁永昼，瑞脑销金兽。\n佳节又重阳，玉枕纱厨，半夜凉初透。\n东篱把酒黄昏后，有暗香盈袖。\n莫道不销魂，帘卷西风，人比黄花瘦。", "volume": "上册" },
      { "week": "第四周", "title": "新年作", "author": "[唐] 刘长卿", "content": "乡心新岁切，天畔独潸然。\n老至居人下，春归在客先。\n岭猿同旦暮，江柳共风烟。\n已似长沙傅，从今又几年。", "volume": "上册" },
      { "week": "第五周", "title": "陇西行", "author": "[唐] 王维", "content": "十里一走马，五里一扬鞭。\n都护军书至，匈奴围酒泉。\n关山正飞雪，烽戍断无烟。", "volume": "上册" },
      { "week": "第六周", "title": "春望", "author": "[唐] 杜甫", "content": "国破山河在，城春草木深。\n感时花溅泪，恨别鸟惊心。\n烽火连三月，家书抵万金。\n白头搔更短，浑欲不胜簪。", "volume": "上册" },
      { "week": "第七周", "title": "山坡羊·潼关怀古", "author": "[元] 张养浩", "content": "峰峦如聚，波涛如怒，山河表里潼关路。\n望西都，意踌躇。\n伤心秦汉经行处，宫阙万间都做了土。\n兴，百姓苦；亡，百姓苦！", "volume": "上册" },
      { "week": "第八周", "title": "水调歌头", "author": "[宋] 苏轼", "content": "明月几时有？把酒问青天。\n不知天上宫阙，今夕是何年。\n我欲乘风归去，又恐琼楼玉宇，高处不胜寒。\n起舞弄清影，何似在人间。\n转朱阁，低绮户，照无眠。\n不应有恨，何事长向别时圆？\n人有悲欢离合，月有阴晴圆缺，此事古难全。\n但愿人长久，千里共婵娟。", "volume": "上册" },
      { "week": "第九周", "title": "观书有感", "author": "[宋] 朱熹", "content": "半亩方塘一鉴开，天光云影共徘徊。\n问渠那得清如许？为有源头活水来。", "volume": "上册" },
      { "week": "第十周", "title": "春夜", "author": "[宋] 王安石", "content": "金炉香烬漏声残，翦翦轻风阵阵寒。\n春色恼人眠不得，月移花影上栏杆。", "volume": "上册" },
      { "week": "第十一周", "title": "题义公禅房", "author": "[唐] 孟浩然", "content": "义公习禅寂，结宇依空林。\n户外一峰秀，阶前众壑深。\n夕阳连雨足，空翠落庭阴。\n看取莲花净，应知不染心。", "volume": "上册" },
      { "week": "第十二周", "title": "寒食书事", "author": "[宋] 赵鼎", "content": "寂寂柴门村落里，也教插柳记年华。\n禁烟不到粤人国，上冢亦携庞老家。\n汉寝唐陵无麦饭，山溪野径有梨花。\n一樽径籍青苔卧，莫管城头奏暮笳。", "volume": "上册" },
      { "week": "第十三周", "title": "苏幕遮·怀旧", "author": "[宋] 范仲淹", "content": "碧云天，黄叶地，秋色连波，波上寒烟翠。\n山映斜阳天接水，芳草无情，更在斜阳外。\n黯乡魂，追旅思，夜夜除非，好梦留人睡。\n明月楼高休独倚，酒入愁肠，化作相思泪。", "volume": "上册" },
      { "week": "第十四周", "title": "渔家傲", "author": "[宋] 范仲淹", "content": "塞下秋来风景异，衡阳雁去无留意。\n四面边声连角起，千嶂里，长烟落日孤城闭。\n浊酒一杯家万里，燕然未勒归无计。\n羌管悠悠霜满地，人不寐，将军白发征夫泪。", "volume": "上册" },
      { "week": "第十五周", "title": "青玉案·元夕", "author": "[宋] 辛弃疾", "content": "东风夜放花千树，更吹落、星如雨。\n宝马雕车香满路，凤箫声动，玉壶光转，一夜鱼龙舞。\n蛾儿雪柳黄金缕，笑语盈盈暗香去。\n众里寻他千百度，蓦然回首，那人却在，灯火阑珊处。", "volume": "上册" },
      { "week": "第十六周", "title": "《论语》三章", "author": "[春秋] 孔子", "content": "学而时习之，不亦说乎？\n温故而知新，可以为师矣。\n三人行，必有我师焉。", "volume": "上册" }
    ];
    var grade5LowerPoems = [
      { "week": "第一周", "title": "秋夜曲", "author": "[唐] 王维", "content": "桂魄初生秋露微，轻罗已薄未更衣。\n银筝夜久殷勤弄，心怯空房不忍归。", "volume": "下册" },
      { "week": "第二周", "title": "画眉鸟", "author": "[宋] 欧阳修", "content": "百啭千声随意移，山花红紫树高低。\n始知锁向金笼听，不及林间自在啼。", "volume": "下册" },
      { "week": "第三周", "title": "清平乐·春归何处", "author": "[宋] 黄庭坚", "content": "春归何处？寂寞无行路。\n若有人知春去处，唤取归来同住。\n春无踪迹谁知？除非问取黄鹂。\n百啭无人能解，因风飞过蔷薇。", "volume": "下册" },
      { "week": "第四周", "title": "鄂州南楼书事", "author": "[宋] 黄庭坚", "content": "四顾山光接水光，凭栏十里芰荷香。\n清风明月无人管，并作南楼一味凉。", "volume": "下册" },
      { "week": "第五周", "title": "江村晚眺", "author": "[宋] 戴复古", "content": "江头落日照平沙，潮退渔船阁岸斜。\n白鸟一双临水立，见人惊起入芦花。", "volume": "下册" },
      { "week": "第六周", "title": "菩萨蛮", "author": "[唐] 李白", "content": "平林漠漠烟如织，寒山一带伤心碧。\n暝色入高楼，有人楼上愁。\n玉阶空伫立，宿鸟归飞急。\n何处是归程？长亭更短亭。", "volume": "下册" },
      { "week": "第七周", "title": "忆秦娥", "author": "[唐] 李白", "content": "箫声咽，秦娥梦断秦楼月。\n秦楼月，年年柳色，灞陵伤别。\n乐游原上清秋节，咸阳古道音尘绝。\n音尘绝，西风残照，汉家陵阙。", "volume": "下册" },
      { "week": "第八周", "title": "饮酒·其五", "author": "[晋] 陶渊明", "content": "结庐在人境，而无车马喧。\n问君何能尔？心远地自偏。\n采菊东篱下，悠然见南山。\n山气日夕佳，飞鸟相与还。\n此中有真意，欲辨已忘言。", "volume": "下册" },
      { "week": "第九周", "title": "无题", "author": "[唐] 李商隐", "content": "相见时难别亦难，东风无力百花残。\n春蚕到死丝方尽，蜡炬成灰泪始干。\n晓镜但愁云鬓改，夜吟应觉月光寒。\n蓬山此去无多路，青鸟殷勤为探看。", "volume": "下册" },
      { "week": "第十周", "title": "峨眉山月歌", "author": "[唐] 李白", "content": "峨眉山月半轮秋，影入平羌江水流。\n夜发清溪向三峡，思君不见下渝州。", "volume": "下册" },
      { "week": "第十一周", "title": "春晴", "author": "[唐] 王驾", "content": "雨前初见花间蕊，雨后全无叶底花。\n蜂蝶纷纷过墙去，却疑春色在邻家。", "volume": "下册" },
      { "week": "第十二周", "title": "商山早行", "author": "[唐] 温庭筠", "content": "晨起动征铎，客行悲故乡。\n鸡声茅店月，人迹板桥霜。\n槲叶落山路，枳花明驿墙。\n因思杜陵梦，凫雁满回塘。", "volume": "下册" },
      { "week": "第十三周", "title": "听弹琴", "author": "[唐] 刘长卿", "content": "泠泠七弦上，静听松风寒。\n古调虽自爱，今人多不弹。", "volume": "下册" },
      { "week": "第十四周", "title": "金陵酒肆留别", "author": "[唐] 李白", "content": "风吹柳花满店香，吴姬压酒唤客尝。\n金陵子弟来相送，欲行不行各尽觞。\n请君试问东流水，别意与之谁短长？", "volume": "下册" },
      { "week": "第十五周", "title": "春日寻芳", "author": "[宋] 朱熹", "content": "胜日寻芳泗水滨，无边光景一时新。\n等闲识得东风面，万紫千红总是春。", "volume": "下册" },
      { "week": "第十六周", "title": "乡村", "author": "[宋] 翁卷", "content": "绿遍山原白满川，子规声里雨如烟。\n乡村四月闲人少，才了蚕桑又插田。", "volume": "下册" }
    ];

    // ---------- 六年级 ----------
    var grade6UpperPoems = [
      { "week": "第一周", "title": "江城子·乙卯正月二十日记梦", "author": "[宋] 苏轼", "content": "十年生死两茫茫，不思量，自难忘。\n千里孤坟，无处话凄凉。\n纵使相逢应不识，尘满面，鬓如霜。\n夜来幽梦忽还乡，小轩窗，正梳妆。\n相顾无言，惟有泪千行。\n料得年年肠断处，明月夜，短松冈。", "volume": "上册" },
      { "week": "第二周", "title": "送杜少府之任蜀川", "author": "[唐] 王勃", "content": "城阙辅三秦，风烟望五津。\n与君离别意，同是宦游人。\n海内存知己，天涯若比邻。\n无为在歧路，儿女共沾巾。", "volume": "上册" },
      { "week": "第三周", "title": "青玉案", "author": "[宋] 贺铸", "content": "凌波不过横塘路，但目送、芳尘去。\n锦瑟华年谁与度？月桥花院，琐窗朱户，只有春知处。\n飞云冉冉蘅皋暮，彩笔新题断肠句。\n试问闲愁都几许？一川烟草，满城风絮，梅子黄时雨。", "volume": "上册" },
      { "week": "第四周", "title": "菩萨蛮·书江西造口壁", "author": "[宋] 辛弃疾", "content": "郁孤台下清江水，中间多少行人泪。\n西北望长安，可怜无数山。\n青山遮不住，毕竟东流去。\n江晚正愁余，山深闻鹧鸪。", "volume": "上册" },
      { "week": "第五周", "title": "如梦令", "author": "[宋] 李清照", "content": "常记溪亭日暮，沉醉不知归路。\n兴尽晚回舟，误入藕花深处。\n争渡，争渡，惊起一滩鸥鹭。", "volume": "上册" },
      { "week": "第六周", "title": "宣州谢朓楼饯别校书叔云", "author": "[唐] 李白", "content": "弃我去者，昨日之日不可留；\n乱我心者，今日之日多烦忧。\n长风万里送秋雁，对此可以酣高楼。\n蓬莱文章建安骨，中间小谢又清发。\n俱怀逸兴壮思飞，欲上青天揽明月。\n抽刀断水水更流，举杯消愁愁更愁。\n人生在世不称意，明朝散发弄扁舟。", "volume": "上册" },
      { "week": "第七周", "title": "望岳", "author": "[唐] 杜甫", "content": "岱宗夫如何？齐鲁青未了。\n造化钟神秀，阴阳割昏晓。\n荡胸生曾云，决眦入归鸟。\n会当凌绝顶，一览众山小。", "volume": "上册" },
      { "week": "第八周", "title": "民为贵章", "author": "[战国] 孟子", "content": "民为贵，社稷次之，君为轻。", "volume": "上册" },
      { "week": "第九周", "title": "大风歌", "author": "[汉] 刘邦", "content": "大风起兮云飞扬，威加海内兮归故乡，安得猛士兮守四方！", "volume": "上册" },
      { "week": "第十周", "title": "玄都观桃花", "author": "[唐] 刘禹锡", "content": "紫陌红尘拂面来，无人不道看花回。\n玄都观里桃千树，尽是刘郎去后栽。", "volume": "上册" },
      { "week": "第十一周", "title": "旅夜书怀", "author": "[唐] 杜甫", "content": "细草微风岸，危樯独夜舟。\n星垂平野阔，月涌大江流。\n名岂文章著，官应老病休。\n飘飘何所似？天地一沙鸥。", "volume": "上册" },
      { "week": "第十二周", "title": "罢相作", "author": "[唐] 李适之", "content": "避贤初罢相，乐圣且衔杯。\n为问门前客，今朝几个来？", "volume": "上册" },
      { "week": "第十三周", "title": "湖上", "author": "[宋] 徐元杰", "content": "花开红树乱莺啼，草长平湖白鹭飞。\n风日晴和人意好，夕阳箫鼓几船归。", "volume": "上册" },
      { "week": "第十四周", "title": "中秋月", "author": "[宋] 苏轼", "content": "暮云收尽溢清寒，银汉无声转玉盘。\n此生此夜不长好，明月明年何处看？", "volume": "上册" },
      { "week": "第十五周", "title": "生查子", "author": "[宋] 欧阳修", "content": "去年元夜时，花市灯如昼。\n月上柳梢头，人约黄昏后。\n今年元夜时，月与灯依旧。\n不见去年人，泪湿春衫袖。", "volume": "上册" },
      { "week": "第十六周", "title": "道德经（第十三章）", "author": "[春秋] 老子", "content": "宠辱若惊，贵大患若身。\n何谓宠辱若惊？宠为下，得之若惊，失之若惊，是谓宠辱若惊。\n何谓贵大患若身？吾所以有大患者，为吾有身，及吾无身，吾有何患？\n故贵以身为天下，若可寄天下；爱以身为天下，若可托天下。", "volume": "上册" }
    ];
    var grade6LowerPoems = [
      { "week": "第一周", "title": "终南别业", "author": "[唐] 王维", "content": "中岁颇好道，晚家南山陲。\n兴来每独往，胜事空自知。\n行到水穷处，坐看云起时。\n偶然值林叟，谈笑无还期。", "volume": "下册" },
      { "week": "第二周", "title": "登高", "author": "[唐] 杜甫", "content": "风急天高猿啸哀，渚清沙白鸟飞回。\n无边落木萧萧下，不尽长江滚滚来。\n万里悲秋常作客，百年多病独登台。\n艰难苦恨繁霜鬓，潦倒新停浊酒杯。", "volume": "下册" },
      { "week": "第三周", "title": "关山月", "author": "[唐] 李白", "content": "明月出天山，苍茫云海间。\n长风几万里，吹度玉门关。\n汉下白登道，胡窥青海湾。\n由来征战地，不见有人还。\n戍客望边邑，思归多苦颜。\n高楼当此夜，叹息未应闲。", "volume": "下册" },
      { "week": "第四周", "title": "菊花", "author": "[唐] 元稹", "content": "秋丛绕舍似陶家，遍绕篱边日渐斜。\n不是花中偏爱菊，此花开尽更无花。", "volume": "下册" },
      { "week": "第五周", "title": "蝉", "author": "[唐] 虞世南", "content": "垂緌饮清露，流响出疏桐。\n居高声自远，非是藉秋风。", "volume": "下册" },
      { "week": "第六周", "title": "西江月·梅花", "author": "[宋] 苏轼", "content": "玉骨那愁瘴雾，冰姿自有仙风。\n海仙时遣探芳丛，倒挂绿毛幺凤。\n素面翻嫌粉涴，洗妆不褪唇红。\n高情已逐晓云空，不与梨花同梦。", "volume": "下册" },
      { "week": "第七周", "title": "送友人", "author": "[唐] 李白", "content": "青山横北郭，白水绕东城。\n此地一为别，孤蓬万里征。\n浮云游子意，落日故人情。\n挥手自兹去，萧萧班马鸣。", "volume": "下册" },
      { "week": "第八周", "title": "读书须有疑", "author": "[宋] 朱熹", "content": "读书无疑者，须教有疑；\n有疑者，却要无疑，到这里方是长进。", "volume": "下册" },
      { "week": "第九周", "title": "定风波", "author": "[宋] 苏轼", "content": "莫听穿林打叶声，何妨吟啸且徐行。\n竹杖芒鞋轻胜马，谁怕？一蓑烟雨任平生。\n料峭春风吹酒醒，微冷，山头斜照却相迎。\n回首向来萧瑟处，归去，也无风雨也无晴。", "volume": "下册" },
      { "week": "第十周", "title": "行路难·其一", "author": "[唐] 李白", "content": "金樽清酒斗十千，玉盘珍羞直万钱。\n停杯投箸不能食，拔剑四顾心茫然。\n欲渡黄河冰塞川，将登太行雪满山。\n闲来垂钓碧溪上，忽复乘舟梦日边。\n行路难，行路难，多歧路，今安在？\n长风破浪会有时，直挂云帆济沧海。", "volume": "下册" },
      { week: "第十一周", title: "暂缺", author: "暂缺", content: "暂缺", volume: "下册" },
      { week: "第十二周", title: "暂缺", author: "暂缺", content: "暂缺", volume: "下册" },
      { week: "第十三周", title: "暂缺", author: "暂缺", content: "暂缺", volume: "下册" },
      { week: "第十四周", title: "暂缺", author: "暂缺", content: "暂缺", volume: "下册" },
      { week: "第十五周", title: "暂缺", author: "暂缺", content: "暂缺", volume: "下册" },
      { week: "第十六周", title: "暂缺", author: "暂缺", content: "暂缺", volume: "下册" }
    ];
  </script>
</body>
</html>